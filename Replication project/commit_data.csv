Repository,File,Commit Message
openstack/puppet-cinder,manifests/backend/dellemc_powerflex.pp,"Use Hash values for properties

Use Hash values instead of Array values to avoid unnecessary conversion
between actual value type and internal data type. This allows us to
avoid potential issues caused by tricky parsing or conversion.

Note that this could not be backword compatible and users have to
update their manifests to adopt to this change.

Change-Id: Id4a32752eb1073c6467d089bc97c8271741feba0"
openstack/puppet-cinder,manifests/backend/dellemc_powermax.pp,"Use Hash values for properties

Use Hash values instead of Array values to avoid unnecessary conversion
between actual value type and internal data type. This allows us to
avoid potential issues caused by tricky parsing or conversion.

Note that this could not be backword compatible and users have to
update their manifests to adopt to this change.

Change-Id: Id4a32752eb1073c6467d089bc97c8271741feba0"
openstack/puppet-cinder,manifests/backend/dellemc_powerstore.pp,"Use Hash values for properties

Use Hash values instead of Array values to avoid unnecessary conversion
between actual value type and internal data type. This allows us to
avoid potential issues caused by tricky parsing or conversion.

Note that this could not be backword compatible and users have to
update their manifests to adopt to this change.

Change-Id: Id4a32752eb1073c6467d089bc97c8271741feba0"
openstack/puppet-cinder,manifests/backend/dellemc_sc.pp,"Use Hash values for properties

Use Hash values instead of Array values to avoid unnecessary conversion
between actual value type and internal data type. This allows us to
avoid potential issues caused by tricky parsing or conversion.

Note that this could not be backword compatible and users have to
update their manifests to adopt to this change.

Change-Id: Id4a32752eb1073c6467d089bc97c8271741feba0"
openstack/puppet-cinder,manifests/backend/dellemc_unity.pp,"Use Hash values for properties

Use Hash values instead of Array values to avoid unnecessary conversion
between actual value type and internal data type. This allows us to
avoid potential issues caused by tricky parsing or conversion.

Note that this could not be backword compatible and users have to
update their manifests to adopt to this change.

Change-Id: Id4a32752eb1073c6467d089bc97c8271741feba0"
openstack/puppet-cinder,manifests/backend/dellemc_xtremio.pp,"Use Hash values for properties

Use Hash values instead of Array values to avoid unnecessary conversion
between actual value type and internal data type. This allows us to
avoid potential issues caused by tricky parsing or conversion.

Note that this could not be backword compatible and users have to
update their manifests to adopt to this change.

Change-Id: Id4a32752eb1073c6467d089bc97c8271741feba0"
openstack/puppet-cinder,manifests/backend/emc_vnx.pp,"Use Hash values for properties

Use Hash values instead of Array values to avoid unnecessary conversion
between actual value type and internal data type. This allows us to
avoid potential issues caused by tricky parsing or conversion.

Note that this could not be backword compatible and users have to
update their manifests to adopt to this change.

Change-Id: Id4a32752eb1073c6467d089bc97c8271741feba0"
openstack/puppet-cinder,manifests/backend/gpfs.pp,"Use Hash values for properties

Use Hash values instead of Array values to avoid unnecessary conversion
between actual value type and internal data type. This allows us to
avoid potential issues caused by tricky parsing or conversion.

Note that this could not be backword compatible and users have to
update their manifests to adopt to this change.

Change-Id: Id4a32752eb1073c6467d089bc97c8271741feba0"
openstack/puppet-cinder,manifests/backend/hpe3par_iscsi.pp,"Use Hash values for properties

Use Hash values instead of Array values to avoid unnecessary conversion
between actual value type and internal data type. This allows us to
avoid potential issues caused by tricky parsing or conversion.

Note that this could not be backword compatible and users have to
update their manifests to adopt to this change.

Change-Id: Id4a32752eb1073c6467d089bc97c8271741feba0"
openstack/puppet-cinder,manifests/backend/ibm_svf.pp,"Use Hash values for properties

Use Hash values instead of Array values to avoid unnecessary conversion
between actual value type and internal data type. This allows us to
avoid potential issues caused by tricky parsing or conversion.

Note that this could not be backword compatible and users have to
update their manifests to adopt to this change.

Change-Id: Id4a32752eb1073c6467d089bc97c8271741feba0"
openstack/puppet-cinder,manifests/backend/iscsi.pp,"Use Hash values for properties

Use Hash values instead of Array values to avoid unnecessary conversion
between actual value type and internal data type. This allows us to
avoid potential issues caused by tricky parsing or conversion.

Note that this could not be backword compatible and users have to
update their manifests to adopt to this change.

Change-Id: Id4a32752eb1073c6467d089bc97c8271741feba0"
openstack/puppet-cinder,manifests/backend/netapp.pp,"Use Hash values for properties

Use Hash values instead of Array values to avoid unnecessary conversion
between actual value type and internal data type. This allows us to
avoid potential issues caused by tricky parsing or conversion.

Note that this could not be backword compatible and users have to
update their manifests to adopt to this change.

Change-Id: Id4a32752eb1073c6467d089bc97c8271741feba0"
openstack/puppet-cinder,manifests/backend/nexenta.pp,"Use Hash values for properties

Use Hash values instead of Array values to avoid unnecessary conversion
between actual value type and internal data type. This allows us to
avoid potential issues caused by tricky parsing or conversion.

Note that this could not be backword compatible and users have to
update their manifests to adopt to this change.

Change-Id: Id4a32752eb1073c6467d089bc97c8271741feba0"
openstack/puppet-cinder,manifests/backend/nfs.pp,"Use Hash values for properties

Use Hash values instead of Array values to avoid unnecessary conversion
between actual value type and internal data type. This allows us to
avoid potential issues caused by tricky parsing or conversion.

Note that this could not be backword compatible and users have to
update their manifests to adopt to this change.

Change-Id: Id4a32752eb1073c6467d089bc97c8271741feba0"
openstack/puppet-cinder,manifests/backend/pure.pp,"Use Hash values for properties

Use Hash values instead of Array values to avoid unnecessary conversion
between actual value type and internal data type. This allows us to
avoid potential issues caused by tricky parsing or conversion.

Note that this could not be backword compatible and users have to
update their manifests to adopt to this change.

Change-Id: Id4a32752eb1073c6467d089bc97c8271741feba0"
openstack/puppet-cinder,manifests/backend/quobyte.pp,"Use Hash values for properties

Use Hash values instead of Array values to avoid unnecessary conversion
between actual value type and internal data type. This allows us to
avoid potential issues caused by tricky parsing or conversion.

Note that this could not be backword compatible and users have to
update their manifests to adopt to this change.

Change-Id: Id4a32752eb1073c6467d089bc97c8271741feba0"
openstack/puppet-cinder,manifests/backend/rbd.pp,"Use Hash values for properties

Use Hash values instead of Array values to avoid unnecessary conversion
between actual value type and internal data type. This allows us to
avoid potential issues caused by tricky parsing or conversion.

Note that this could not be backword compatible and users have to
update their manifests to adopt to this change.

Change-Id: Id4a32752eb1073c6467d089bc97c8271741feba0"
openstack/puppet-cinder,manifests/backend/san.pp,"Use Hash values for properties

Use Hash values instead of Array values to avoid unnecessary conversion
between actual value type and internal data type. This allows us to
avoid potential issues caused by tricky parsing or conversion.

Note that this could not be backword compatible and users have to
update their manifests to adopt to this change.

Change-Id: Id4a32752eb1073c6467d089bc97c8271741feba0"
openstack/puppet-cinder,manifests/backend/solidfire.pp,"Use Hash values for properties

Use Hash values instead of Array values to avoid unnecessary conversion
between actual value type and internal data type. This allows us to
avoid potential issues caused by tricky parsing or conversion.

Note that this could not be backword compatible and users have to
update their manifests to adopt to this change.

Change-Id: Id4a32752eb1073c6467d089bc97c8271741feba0"
openstack/puppet-cinder,manifests/backend/vstorage.pp,"Use Hash values for properties

Use Hash values instead of Array values to avoid unnecessary conversion
between actual value type and internal data type. This allows us to
avoid potential issues caused by tricky parsing or conversion.

Note that this could not be backword compatible and users have to
update their manifests to adopt to this change.

Change-Id: Id4a32752eb1073c6467d089bc97c8271741feba0"
openstack/puppet-cinder,manifests/backend/vmdk.pp,"Merge ""Remove support for VMWare storage driver"""
openstack/puppet-cinder,manifests/vmware.pp,"Merge ""Remove support for VMWare storage driver"""
openstack/puppet-cinder,manifests/api.pp,"Merge ""Use common defined resource type to manage ssl options"""
openstack/puppet-cinder,manifests/backend/vmdk.pp,"Remove support for VMWare storage driver

We removed vmwareapi virt driver support of puppet-nova during 2023.2
cycle[1] and have heard no feedback about it so far. This indicates
no actual users of Puppet OpenStack modules are using our modules to
manage OpenStack clusters integrated with VMWare.

Therefore, remove support for the VMWare storage driver which we
deprecated in 2023.2 release[1].

[1] fd66bd64465f36bc87ff17969e47c9a0b538bd16

Change-Id: Ib6f59a63868e809ff94fe8f433515de9f8f18bc3"
openstack/puppet-cinder,manifests/vmware.pp,"Remove support for VMWare storage driver

We removed vmwareapi virt driver support of puppet-nova during 2023.2
cycle[1] and have heard no feedback about it so far. This indicates
no actual users of Puppet OpenStack modules are using our modules to
manage OpenStack clusters integrated with VMWare.

Therefore, remove support for the VMWare storage driver which we
deprecated in 2023.2 release[1].

[1] fd66bd64465f36bc87ff17969e47c9a0b538bd16

Change-Id: Ib6f59a63868e809ff94fe8f433515de9f8f18bc3"
openstack/puppet-cinder,manifests/api.pp,"Use common defined resource type to manage ssl options

Change-Id: I58d1b8bcc824dfc18e4c65165219dad84177bf88"
openstack/puppet-cinder,manifests/init.pp,"Simplify logic for *_availability_zone options

Cinder uses storage_availability_zone as default availability zone when
default_availability_zone is not set, so we don't have to copy
the value between these two options. Also 'nova' is the default value
of storage_availability_zone option in cinder so can be replaced by
service default handling.

Change-Id: I244fcb5645a28909cf6f77f3f6e3758c3c84ee4d"
openstack/puppet-cinder,manifests/init.pp,"Expose parameter to customize [oslo_messaging_notifications] retry

The parameter has been managed by puppet-oslo, but its value could not
be set via this module.

Change-Id: I025b737b4b92241b3f71c82fd4dbb12ce8724e4b"
openstack/puppet-cinder,manifests/init.pp,"Merge ""Add support for [oslo_messaging_rabbit] enable_cancel_on_failover"""
openstack/puppet-cinder,manifests/init.pp,"Add support for [oslo_messaging_rabbit] enable_cancel_on_failover

Depends-on: https://review.opendev.org/928440
Change-Id: I7adb320a522d5ceb565d6dd21ed4d9fd639337b3"
openstack/puppet-cinder,manifests/os_brick.pp,"Support new os-brick options

Add support for the new options added in os-brick 6.9.0 .

Depends-on: https://review.opendev.org/930364
Change-Id: I1763188b3f0f6722aac5b826d7fd657f7f5f1853"
openstack/puppet-cinder,manifests/logging.pp,"Merge ""logging: Deprecate watch_log_file"""
openstack/puppet-cinder,manifests/nova.pp,"Require nova password

Users should set valid auth options in nova section so that cinder
can interact with nova in some operations such as attachment deletion.
Make the password parameter required to make users aware of their
incomplete settings.

Also deprecate the auth_section parameter because now we expect that
all auth options are set in the nova section.

Change-Id: I0252b341d00e5b2b07ead19a01f98aee68cd7305"
openstack/puppet-cinder,manifests/logging.pp,"logging: Deprecate watch_log_file

This option was deprecated in oslo.log 6.0.0 [1]. Because the warning
to catch usage of the parameter is implemented in the underlying
oslo::log defined resource type, no additional warning message is
implemented in this module.

[1] https://review.opendev.org/914788

Depends-on: https://review.opendev.org/930126
Change-Id: I357130db1e230013203f58e5397b94fd823e1566"
openstack/puppet-cinder,manifests/keystone/auth.pp,"Expose configure_service

This parameter has been implemented in the underlying defined resource
type but was not configurable.

Change-Id: I411e0741a923d65aaca91d5167762f46a4f39e02"
openstack/puppet-cinder,manifests/keystone/auth.pp,"Deprecate management of cinder v3 user

Cinder does not require the dedicated keystone user for volume v3 API.
Deprecate the functionality to create the additional keystone user for
volume v3 API to get rid of the unnecessary complexity.

Change-Id: I8567a79be1407630b3dcc20418c3f5489272a058"
openstack/puppet-cinder,manifests/keystone/auth.pp,"Add validations for keystone resource parameters

The underlying implementation already have type validations. Inherit
these and make a few adjustment so that validation failures are raised
from the external interface layer instead of the internal interface.

Change-Id: Ibc35d0f9669fe575d57a4225ef331596aef37921"
openstack/puppet-cinder,manifests/init.pp,"Expose rabbit_qos_prefetch_count

The option was supported by puppet-oslo but was not configurable via
this module.

Change-Id: I607cfa83aa9d521461bb0758215015bb9e52c68e"
openstack/puppet-cinder,manifests/healthcheck.pp,"Add support for [healthcheck] enable_by_file_paths

Depends-on: https://review.opendev.org/923648
Change-Id: I197732a6a9c53467012bb6e439af5ecdd7934397"
openstack/puppet-cinder,manifests/backend/rbd.pp,"Add manage_package to RBD backend

Ability to not manage the ceph-common package by setting
this to false (Default: true)

Change-Id: I1f51d9ed3f4862f2c0e357cb86e7469333c2c208"
openstack/puppet-cinder,manifests/init.pp,"Merge ""Remove support for amqp1 messaging driver"""
openstack/puppet-cinder,manifests/init.pp,"Remove support for amqp1 messaging driver

The base implementation in puppet-oslo was deprecated during the 2023.2
cycle[1], so can be removed now.

[1] e174113210699b433dbae4c2c5a68bc3d269b5c3

Change-Id: I6355316567b9b2963af1241f33c259e2aec82296"
openstack/puppet-glance,manifests/backend/multistore/vsphere.pp,"Remove support for VMWare Datastore store driver

We removed vmwareapi virt driver support of puppet-nova during 2023.2
cycle[1] and have heard no feedback about it so far. This indicates
no actual users of Puppet OpenStack modules are using our modules to
manage OpenStack clusters integrated with VMWare.

Therefore, remove support for the VMWare Datastore store driver which
we deprecated in 2023.2 release[1].

[1] fb29ff5f38de801438df46949fdd6680ef815f19

Change-Id: I1e6de70acdd9d557043914caf7e4ed2da4519958"
openstack/puppet-glance,manifests/backend/vsphere.pp,"Remove support for VMWare Datastore store driver

We removed vmwareapi virt driver support of puppet-nova during 2023.2
cycle[1] and have heard no feedback about it so far. This indicates
no actual users of Puppet OpenStack modules are using our modules to
manage OpenStack clusters integrated with VMWare.

Therefore, remove support for the VMWare Datastore store driver which
we deprecated in 2023.2 release[1].

[1] fb29ff5f38de801438df46949fdd6680ef815f19

Change-Id: I1e6de70acdd9d557043914caf7e4ed2da4519958"
openstack/puppet-glance,manifests/notify/rabbitmq.pp,"Use consistent format for oslo_messaging_notifications options

The topic parameter is not actually specific to rabbitmq.
Use the consistent format with only `notification_` prefix to make
the interfaces for options in the same section consistent.

Change-Id: I5e84fe162e3ff65c494642eb8b9b9967483aa67b"
openstack/puppet-glance,manifests/notify/rabbitmq.pp,"Expose parameter to customize [oslo_messaging_notifications] retry

The parameter has been managed by puppet-oslo, but its value could not
be set via this module.

Change-Id: I62221868fdfbaab1abb865117378b193b4ce8756"
openstack/puppet-glance,manifests/notify/rabbitmq.pp,"Merge ""Add support for [oslo_messaging_rabbit] enable_cancel_on_failover"""
openstack/puppet-glance,manifests/notify/rabbitmq.pp,"Add support for [oslo_messaging_rabbit] enable_cancel_on_failover

Depends-on: https://review.opendev.org/928440
Change-Id: I192dbd3a72a5ff13d670d992d8def94e2be4db2b"
openstack/puppet-glance,manifests/os_brick.pp,"Support new os-brick options

Add support for the new options added in os-brick 6.9.0 .

Note:
Release note is omitted because the os_brick class was added during
this cycle.

Depends-on: https://review.opendev.org/930364
Change-Id: Ifac1c6479fd43c33452a35cbeeba8ee8b72a884d"
openstack/puppet-glance,manifests/os_brick.pp,"Support [os_brick] lock_path

Support configuring specific lock path for os-brick, so that glance
uses the local lock_path for generic purpose but use the shared one
for specifically os-brick.

Change-Id: I41a3edc796782bcafc1c050d92dc75b3e4ee41a6"
openstack/puppet-glance,manifests/api/logging.pp,"logging: Deprecate watch_log_file

This option was deprecated in oslo.log 6.0.0 [1]. Because the warning
to catch usage of the parameter is implemented in the underlying
oslo::log defined resource type, no additional warning message is
implemented in this module.

[1] https://review.opendev.org/914788

Depends-on: https://review.opendev.org/930126
Change-Id: Ieb3480254411f1251df7bbcdc85b3952b46f3335"
openstack/puppet-glance,manifests/cache/logging.pp,"logging: Deprecate watch_log_file

This option was deprecated in oslo.log 6.0.0 [1]. Because the warning
to catch usage of the parameter is implemented in the underlying
oslo::log defined resource type, no additional warning message is
implemented in this module.

[1] https://review.opendev.org/914788

Depends-on: https://review.opendev.org/930126
Change-Id: Ieb3480254411f1251df7bbcdc85b3952b46f3335"
openstack/puppet-glance,manifests/keystone/auth.pp,"Add validations for keystone resource parameters

The underlying implementation already have type validations. Inherit
these and make a few adjustment so that validation failures are raised
from the external interface layer instead of the internal interface.

Change-Id: Id5febcea70346d810b4025ecc25dac2ecd0716ca"
openstack/puppet-glance,manifests/notify/rabbitmq.pp,"Expose rabbit_qos_prefetch_count

The option was supported by puppet-oslo but was not configurable via
this module.

Change-Id: Idd8cda64a9fb507b15265e155ed55a5bcee8c17b"
openstack/puppet-glance,manifests/api.pp,"Add support for [DEFAULT] hashing_algorithm

Change-Id: I61da5400bce9ce2df247ab4b4968394e4c2cbf5d"
openstack/puppet-glance,manifests/import_filtering_opts.pp,"Merge ""Add support for [import_filtering_opts] options"""
openstack/puppet-glance,manifests/import_filtering_opts.pp,"Add support for [import_filtering_opts] options

Change-Id: I22c4089eee6f875e90b8b0aee0d49ceb23b2a68f"
openstack/puppet-glance,manifests/api.pp,"Remove support for [DEFAULT] location_strategy

... because the option was already removed from glance.

Depends-on: https://review.opendev.org/924991
Change-Id: Ia6938cdbb7c4e49196563e161d05b44f5eb08f86"
openstack/puppet-glance,manifests/healthcheck.pp,"Add support for [healthcheck] enable_by_file_paths

Depends-on: https://review.opendev.org/923648
Change-Id: Ia3c7ac7025f0a0f908fed11feb229d159d72f890"
openstack/puppet-glance,manifests/policy.pp,"Remove unnecessary openstacklib::policy resource tag

This tag is no longer needed since dependency refactoring[1]. Remove
the tag to make the implementation consistent across modules.

[1] 8b3054a13f6af070d627a019c9e1fd996fd1fd6a

Change-Id: I5fed59ee57e289d7b979163725ee6c676858be5c"
openstack/puppet-horizon,manifests/dashboards/heat.pp,"Validate policy definitions using the new data type

... and also validate input for file mode using the existing type
definition from puppetlabs-stdlib.

Depends-on: https://review.opendev.org/930837
Change-Id: I688824ebcc2042548dc18f60b715b11c1d7cdb2f"
openstack/puppet-horizon,manifests/dashboards/manila.pp,"Validate policy definitions using the new data type

... and also validate input for file mode using the existing type
definition from puppetlabs-stdlib.

Depends-on: https://review.opendev.org/930837
Change-Id: I688824ebcc2042548dc18f60b715b11c1d7cdb2f"
openstack/puppet-horizon,manifests/policy.pp,"Validate policy definitions using the new data type

... and also validate input for file mode using the existing type
definition from puppetlabs-stdlib.

Depends-on: https://review.opendev.org/930837
Change-Id: I688824ebcc2042548dc18f60b715b11c1d7cdb2f"
openstack/puppet-horizon,manifests/policy/base.pp,"Validate policy definitions using the new data type

... and also validate input for file mode using the existing type
definition from puppetlabs-stdlib.

Depends-on: https://review.opendev.org/930837
Change-Id: I688824ebcc2042548dc18f60b715b11c1d7cdb2f"
openstack/puppet-horizon,manifests/policy.pp,"Enforce yaml format for policy files

Support for json format has been removed[1]. Also require boolean
parameter for purge_config.

[1] d689704739abac1711403b3379537e80de212d91

Change-Id: Ib243acde3d31f599efe6cbbc67bc651212d71e98"
openstack/puppet-horizon,manifests/policy/base.pp,"Enforce yaml format for policy files

Support for json format has been removed[1]. Also require boolean
parameter for purge_config.

[1] d689704739abac1711403b3379537e80de212d91

Change-Id: Ib243acde3d31f599efe6cbbc67bc651212d71e98"
openstack/puppet-horizon,manifests/init.pp,"Merge ""Fix rendering of EXTERNAL_MONITORING"""
openstack/puppet-horizon,templates/local_settings.py.erb,"Merge ""Fix rendering of EXTERNAL_MONITORING"""
openstack/puppet-horizon,manifests/init.pp,"Merge ""Validate HTTP(s) URLs"""
openstack/puppet-horizon,manifests/init.pp,"Fix rendering of EXTERNAL_MONITORING

This value passed to this option should be rendered as a list value.

Note that this change enforces usage of an array value to make
users aware of the change more certainly.

Change-Id: Ic3b7a46ebeba9edbccbe63a6616ecb6c94fe9d4e"
openstack/puppet-horizon,templates/local_settings.py.erb,"Fix rendering of EXTERNAL_MONITORING

This value passed to this option should be rendered as a list value.

Note that this change enforces usage of an array value to make
users aware of the change more certainly.

Change-Id: Ic3b7a46ebeba9edbccbe63a6616ecb6c94fe9d4e"
openstack/puppet-horizon,manifests/init.pp,"Validate HTTP(s) URLs

puppetlabs-stdlib provides the type definition to validate HTTP(s) URL
string. Use the type to validate parameters which expect HTTP(s) URLs.

Change-Id: I676c6eafa9dfbc361744f753493b630ef786789a"
openstack/puppet-horizon,manifests/init.pp,"Reject non-hash value for cache_option

... instead of ignoring the input, to help users identifying
the potential problem.

Change-Id: Iecdf1632cc606bfa6de1b3ad7abd38bdb1552e66"
openstack/puppet-horizon,templates/local_settings.py.erb,"Reject non-hash value for cache_option

... instead of ignoring the input, to help users identifying
the potential problem.

Change-Id: Iecdf1632cc606bfa6de1b3ad7abd38bdb1552e66"
openstack/puppet-horizon,manifests/init.pp,"add show_diff parameter to see diffs in localsettings file

This makes setup much easier if diffs are displayed.

Change-Id: I67070af3437986382a6c02450a3deb7daa1f1b53"
openstack/puppet-horizon,manifests/init.pp,"Support COMPRESS_ROOT option

Change-Id: I037f1ecd857981b5dc6b4162007480484c48f681"
openstack/puppet-horizon,templates/local_settings.py.erb,"Support COMPRESS_ROOT option

Change-Id: I037f1ecd857981b5dc6b4162007480484c48f681"
openstack/puppet-horizon,manifests/init.pp,"Merge ""Add support for SIMULTANEOUS_SESSIONS options"""
openstack/puppet-horizon,templates/local_settings.py.erb,"Merge ""Add support for SIMULTANEOUS_SESSIONS options"""
openstack/puppet-horizon,manifests/init.pp,"Add support for SIMULTANEOUS_SESSIONS options

... which was added in 21.1.0 (Yoga) release[1].

[1] https://docs.openstack.org/horizon/latest/configuration/settings.html#simultaneous-sessions

Change-Id: I3d9b04c04828641535ff42866ee378b2b902ebe0"
openstack/puppet-horizon,templates/local_settings.py.erb,"Add support for SIMULTANEOUS_SESSIONS options

... which was added in 21.1.0 (Yoga) release[1].

[1] https://docs.openstack.org/horizon/latest/configuration/settings.html#simultaneous-sessions

Change-Id: I3d9b04c04828641535ff42866ee378b2b902ebe0"
openstack/puppet-horizon,manifests/init.pp,"Support MEMOIZED_MAX_SIZE_DEFAULT option

... which was added in 15.0.0 (Stein) release[1].

[1] https://docs.openstack.org/horizon/latest/configuration/settings.html#memoized-max-size-default

Change-Id: I2057f507c17e097795825d98d2aa234b0269138f"
openstack/puppet-horizon,templates/local_settings.py.erb,"Support MEMOIZED_MAX_SIZE_DEFAULT option

... which was added in 15.0.0 (Stein) release[1].

[1] https://docs.openstack.org/horizon/latest/configuration/settings.html#memoized-max-size-default

Change-Id: I2057f507c17e097795825d98d2aa234b0269138f"
openstack/puppet-horizon,manifests/init.pp,"Merge ""Make sure python3-redis is installed"""
openstack/puppet-horizon,manifests/params.pp,"Merge ""Make sure python3-redis is installed"""
openstack/puppet-horizon,manifests/init.pp,"Make sure python3-redis is installed

... when RedisCache is used

Change-Id: Iaf5dae66cfbc505fdd829630eaec9127b4185247"
openstack/puppet-horizon,manifests/params.pp,"Make sure python3-redis is installed

... when RedisCache is used

Change-Id: Iaf5dae66cfbc505fdd829630eaec9127b4185247"
openstack/puppet-horizon,manifests/init.pp,"Merge ""Use explicit boolean rather than string representation"""
openstack/puppet-horizon,manifests/init.pp,"Merge ""Require valid type for available_themses"""
openstack/puppet-horizon,types/availablethemes.pp,"Merge ""Require valid type for available_themses"""
openstack/puppet-horizon,manifests/init.pp,"Use explicit boolean rather than string representation

... so that we can enforce Boolean input in the future.

Change-Id: I83422b3545a80cd6c76e1317771e3aad44dd978c"
openstack/puppet-nova,manifests/migration/libvirt.pp,"Use more specific name for daemon-reload command

... to avoid conflict with the other modules. Also fix the typo of
daemon.

Change-Id: I7f9abcbafa97ed5d542b5ac4166f7fea0b5b5ffb"
openstack/puppet-nova,manifests/init.pp,"Refactor validation of ssh_key parameters by Struct data type

Change-Id: I55d79365ad9686ea9d59597894f6f337b8fedbf6"
openstack/puppet-nova,types/sshkey.pp,"Refactor validation of ssh_key parameters by Struct data type

Change-Id: I55d79365ad9686ea9d59597894f6f337b8fedbf6"
openstack/puppet-nova,manifests/init.pp,"Merge ""Expose parameter to customize [oslo_messaging_notifications] retry"""
openstack/puppet-nova,manifests/os_brick.pp,"Merge ""Support new os-brick options"""
openstack/puppet-nova,manifests/os_brick.pp,"Merge ""Support [os_brick] lock_path"""
openstack/puppet-nova,manifests/init.pp,"Expose parameter to customize [oslo_messaging_notifications] retry

The parameter has been managed by puppet-oslo, but its value could not
be set via this module.

Change-Id: I79022b40efdbc423a4a85f15149b6a05f348fe1b"
openstack/puppet-nova,manifests/init.pp,"Add support for [oslo_messaging_rabbit] enable_cancel_on_failover

Depends-on: https://review.opendev.org/928440
Change-Id: I784b70703aef13470d53efcd15c2bbf5089da945"
openstack/puppet-nova,manifests/os_brick.pp,"Support new os-brick options

Add support for the new options added in os-brick 6.9.0 .

Note:
Release note is omitted because the os_brick class was added during
this cycle.

Depends-on: https://review.opendev.org/930364
Change-Id: I4784f3c3f2870996d28d1b16261efc451c4a757e"
openstack/puppet-nova,manifests/os_brick.pp,"Support [os_brick] lock_path

Recent os-brick supports supports configuration os-brick specific
lock_path. This adds the new class to manage the [os_brick] lock_path
option.

Depends-on: https://review.opendev.org/865771
Change-Id: Ib3b914b83bb61de1592553f7b43d0eace7c26903"
openstack/puppet-nova,manifests/logging.pp,"logging: Deprecate watch_log_file

This option was deprecated in oslo.log 6.0.0 [1]. Because the warning
to catch usage of the parameter is implemented in the underlying
oslo::log defined resource type, no additional warning message is
implemented in this module.

[1] https://review.opendev.org/914788

Depends-on: https://review.opendev.org/930126
Change-Id: Id7e0f12873112585a4930c1a75a1be798b92d776"
openstack/puppet-nova,manifests/keystone/auth.pp,"Add validations for keystone resource parameters

The underlying implementation already have type validations. Inherit
these and make a few adjustment so that validation failures are raised
from the external interface layer instead of the internal interface.

Change-Id: I9444b35209da1fd8e0f225235440ffedc32c0044"
openstack/puppet-nova,manifests/init.pp,"Expose rabbit_qos_prefetch_count

The option was supported by puppet-oslo but was not configurable via
this module.

Change-Id: Icd2a55375eec1c7c05a321091cfdf63b1121a0c2"
openstack/puppet-nova,manifests/compute/libvirt/version.pp,"Merge ""Drop redundant class name from failure log"""
openstack/puppet-nova,manifests/migration/libvirt.pp,"Merge ""CentOS/RHEL: Use modular libvirt daemons by default"""
openstack/puppet-nova,manifests/params.pp,"Merge ""CentOS/RHEL: Use modular libvirt daemons by default"""
openstack/puppet-nova,manifests/compute/libvirt.pp,"Merge ""Validate virt_type and cpu_mode"""
openstack/puppet-nova,types/cpumode.pp,"Merge ""Validate virt_type and cpu_mode"""
openstack/puppet-nova,types/virttype.pp,"Merge ""Validate virt_type and cpu_mode"""
openstack/puppet-nova,manifests/compute/libvirt.pp,"Merge ""Reject customized cpu_mode for unsupported virt_type"""
openstack/puppet-nova,manifests/compute/libvirt.pp,"Merge ""More strictly validate cpu_mode and cpu_models"""
openstack/puppet-nova,manifests/patch/config.pp,"Merge ""Deprecate support for monkey_patch options"""
openstack/puppet-nova,manifests/compute/libvirt.pp,"Validate virt_type and cpu_mode

Nova accepts only specific values for these two options. Enforce
the same supported choices at the input.

Change-Id: I7c147896f1c04962117ebd1a9b483536826617ac"
openstack/puppet-nova,types/cpumode.pp,"Validate virt_type and cpu_mode

Nova accepts only specific values for these two options. Enforce
the same supported choices at the input.

Change-Id: I7c147896f1c04962117ebd1a9b483536826617ac"
openstack/puppet-nova,types/virttype.pp,"Validate virt_type and cpu_mode

Nova accepts only specific values for these two options. Enforce
the same supported choices at the input.

Change-Id: I7c147896f1c04962117ebd1a9b483536826617ac"
openstack/puppet-nova,manifests/compute/libvirt.pp,"Reject customized cpu_mode for unsupported virt_type

Using cpu_mode other than 'none' is supported only when virt_type is
qemu or kvm and nova-compute fails to start in case an unsupported
combination is used. Enforce this requirement during deployment to
make the invalid configuration more visible.

Change-Id: If9fc59797c4a24a3b7536cd3fe8770316fdf4f4d"
openstack/puppet-nova,manifests/compute/libvirt.pp,"More strictly validate cpu_mode and cpu_models

The nova-compute service fails to start in case
 cpu_mode is 'custom' but cpu_models is default or empty
or
 cpu_models is configured but cpu_mode is not 'custom'

Make the deployment hard-fail in case the given values are not accepted
by nova, to make users aware of their misconfiguration.

Change-Id: Iea4fb9990981ec0dc14a0dabd9674aa3b27a7137"
openstack/puppet-nova,manifests/patch/config.pp,"Deprecate support for monkey_patch options

... because these were deprecated in Queens release, and were already
removed from nova[1].

[1] 9f48aee9b0ea68f7c8eba6a1f3d076e4194d804d

Change-Id: I843b6d79fdf4fb0218a06327c9f6346aa9abd554"
openstack/puppet-nova,manifests/compute.pp,"Use undef for non boolean values

'undef' is the preferred value for non boolean parameters. Switching
to undef allows us to more easily implement parameter types later.

Change-Id: I994a33ecf3f5020617e1acfb50c0a81ae1c1aa45"
openstack/puppet-nova,manifests/compute/spice.pp,"Use undef for non boolean values

'undef' is the preferred value for non boolean parameters. Switching
to undef allows us to more easily implement parameter types later.

Change-Id: I994a33ecf3f5020617e1acfb50c0a81ae1c1aa45"
openstack/puppet-nova,manifests/init.pp,"Use undef for non boolean values

'undef' is the preferred value for non boolean parameters. Switching
to undef allows us to more easily implement parameter types later.

Change-Id: I994a33ecf3f5020617e1acfb50c0a81ae1c1aa45"
openstack/puppet-nova,manifests/init.pp,"Fix described wrong default of nova::enabled_ssl_apis

Change-Id: Id8148559685119661ff2afaab02c53cc0f65a6b8"
openstack/puppet-nova,manifests/compute/libvirt/version.pp,"Drop redundant class name from failure log

Usually the class name is automatically displayed by puppet when
the fail function is called, so we don't have to include it explicitly
in the log.

Change-Id: Id12525911e287587c385e78252fa4ed7f0a47e72"
openstack/puppet-nova,manifests/migration/libvirt.pp,"CentOS/RHEL: Use modular libvirt daemons by default

As of RHEL9 (and thus CentOS 9), modular libvirt is the recommended
mechanism for libvirtd. Adjust the default deployment architecture
accordingly.

Reference
https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/considerations_in_adopting_rhel_9/assembly_virtualization_considerations-in-adopting-rhel-9#ref_changes-to-libvirt_assembly_virtualization

Change-Id: I9317d86cd83b686757ff3a0a7335f99503488d1d"
openstack/puppet-nova,manifests/params.pp,"CentOS/RHEL: Use modular libvirt daemons by default

As of RHEL9 (and thus CentOS 9), modular libvirt is the recommended
mechanism for libvirtd. Adjust the default deployment architecture
accordingly.

Reference
https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/considerations_in_adopting_rhel_9/assembly_virtualization_considerations-in-adopting-rhel-9#ref_changes-to-libvirt_assembly_virtualization

Change-Id: I9317d86cd83b686757ff3a0a7335f99503488d1d"
openstack/puppet-swift,manifests/keystone/auth.pp,"Merge ""Add validations for keystone resource parameters"""
openstack/puppet-swift,manifests/keystone/auth.pp,"Add validations for keystone resource parameters

The underlying implementation already have type validations. Inherit
these and make a few adjustment so that validation failures are raised
from the external interface layer instead of the internal interface.

Change-Id: I58b05a81022ba813d6831b7a22c3d3ebdef3af2c"
openstack/puppet-swift,manifests/storage/server.pp,"storage: Add support for db_preallocation

Change-Id: I6f9f46b2c00e29d108d9f943b54e2205844ef973"
openstack/puppet-swift,manifests/proxy.pp,"proxy: Adjust parameter description

Change description order to make it consistent with actual parameter
definition order. Also adjust the format and fix the wrong default
value described.

Change-Id: Ib3ce1f0b2b83627a39daa6bd46c7ecf2002f713f"
openstack/puppet-swift,manifests/internal_client.pp,"Accept array/dict for affinity options

write_affinity and read_affinity accepts values which represent array
(for write) or hash (for read). Allow using native array or hash so
that users can manage the values passed more easily.

Change-Id: Id628cf07ec78e6239d91be3a8ab22dd4c609e348"
openstack/puppet-swift,manifests/proxy.pp,"Accept array/dict for affinity options

write_affinity and read_affinity accepts values which represent array
(for write) or hash (for read). Allow using native array or hash so
that users can manage the values passed more easily.

Change-Id: Id628cf07ec78e6239d91be3a8ab22dd4c609e348"
openstack/puppet-swift,manifests/internal_client.pp,"Support more options to control internal request behavior

Add support for the following options to control internal requests
within the cluster.
 - timing_expiry
 - request_node_count
 - write_affinity_handoff_delete_count

Change-Id: I47d111127cf37d46988c858cb553f765a303af70"
openstack/puppet-swift,manifests/proxy.pp,"Support more options to control internal request behavior

Add support for the following options to control internal requests
within the cluster.
 - timing_expiry
 - request_node_count
 - write_affinity_handoff_delete_count

Change-Id: I47d111127cf37d46988c858cb553f765a303af70"
openstack/puppet-swift,manifests/internal_client.pp,"Require write_affinity when write_affinity_node_count is customized

This imports the logic in swift::proxy to swift::internal_client
to apply the same validation to equivalent parameters.

Change-Id: I87b2b6d936aa3d12453fd76df6394ad934b073cb"
openstack/puppet-swift,manifests/proxy.pp,"Require write_affinity when write_affinity_node_count is customized

This imports the logic in swift::proxy to swift::internal_client
to apply the same validation to equivalent parameters.

Change-Id: I87b2b6d936aa3d12453fd76df6394ad934b073cb"
openstack/puppet-swift,manifests/internal_client.pp,"Allow customizing sorting_method

Add a new option to customize sorting_method. This allows usage of
the 'timing' sorting method.

Change-Id: I9589b420b8d1c6fcbd29d83945dbdcc2da2e22ef"
openstack/puppet-swift,manifests/proxy.pp,"Allow customizing sorting_method

Add a new option to customize sorting_method. This allows usage of
the 'timing' sorting method.

Change-Id: I9589b420b8d1c6fcbd29d83945dbdcc2da2e22ef"
openstack/puppet-swift,types/sortingmethod.pp,"Allow customizing sorting_method

Add a new option to customize sorting_method. This allows usage of
the 'timing' sorting method.

Change-Id: I9589b420b8d1c6fcbd29d83945dbdcc2da2e22ef"
openstack/puppet-swift,manifests/storage/filter/backend_ratelimit.pp,"Merge ""Support per-method backend ratelimit options"""
openstack/puppet-swift,manifests/proxy.pp,"Merge ""Support [DEFAULT] cors_expose_headers"""
openstack/puppet-swift,manifests/storage/filter/backend_ratelimit.pp,"Support per-method backend ratelimit options

Depends-on: https://review.opendev.org/840542
Change-Id: Ia3b337e4681e03c03bd30581d278a0479df15fdd"
openstack/puppet-swift,manifests/proxy.pp,"Support [DEFAULT] cors_expose_headers

... so that all options rleated to CORS can be customized.

Change-Id: If93fc6b7c16afb5e422f2e7cc6063769d9ce46fe"
openstack/puppet-swift,manifests/proxy.pp,"Add support for allow_open_expired

Depends-on: https://review.opendev.org/874710
Change-Id: Ie3603dd6fe7403c4268070049202b5cc4592c3f9"
openstack/puppet-swift,manifests/containerreconciler.pp,"Merge ""Set appropriate ownership/permission to config files"""
openstack/puppet-swift,manifests/internal_client.pp,"Merge ""Set appropriate ownership/permission to config files"""
openstack/puppet-swift,manifests/keymaster.pp,"Merge ""Set appropriate ownership/permission to config files"""
openstack/puppet-swift,manifests/memcache.pp,"Merge ""Set appropriate ownership/permission to config files"""
openstack/puppet-swift,manifests/objectexpirer.pp,"Merge ""Set appropriate ownership/permission to config files"""
openstack/puppet-swift,manifests/proxy.pp,"Merge ""Set appropriate ownership/permission to config files"""
openstack/puppet-swift,manifests/proxy/ceilometer.pp,"Merge ""Set appropriate ownership/permission to config files"""
openstack/puppet-swift,manifests/storage/drive_audit.pp,"Merge ""Set appropriate ownership/permission to config files"""
openstack/puppet-swift,manifests/storage/server.pp,"Merge ""Set appropriate ownership/permission to config files"""
openstack/puppet-swift,manifests/keymaster.pp,"Support for barbican_endpoint in kms_keymaster

This patch adds support for specifying barbican_endpoint, which is
mandatory if doing a multi-region deployment with kms_keymaster.
Indeed, without it, Castellan may use the wrong endpoint of the
wrong cluster.

Depends-On: Ib7f4219ef5fdef65e9cfd5701e28b5288741783e
Change-Id: If62756770b1a3cdb4215b59aee5f368f54986706"
openstack/puppet-swift,manifests/containerreconciler.pp,"Set appropriate ownership/permission to config files

... to avoid making any config files world readable.

Also swift processes do not need write access to these files, thus
write access can be blocked.

Closes-Bug: #2068898
Change-Id: I8b11fbdb0ea0ca814b962dd72b5c1cb4cd201c24 "
openstack/puppet-swift,manifests/internal_client.pp,"Set appropriate ownership/permission to config files

... to avoid making any config files world readable.

Also swift processes do not need write access to these files, thus
write access can be blocked.

Closes-Bug: #2068898
Change-Id: I8b11fbdb0ea0ca814b962dd72b5c1cb4cd201c24 "
openstack/puppet-swift,manifests/keymaster.pp,"Set appropriate ownership/permission to config files

... to avoid making any config files world readable.

Also swift processes do not need write access to these files, thus
write access can be blocked.

Closes-Bug: #2068898
Change-Id: I8b11fbdb0ea0ca814b962dd72b5c1cb4cd201c24 "
openstack/puppet-swift,manifests/memcache.pp,"Set appropriate ownership/permission to config files

... to avoid making any config files world readable.

Also swift processes do not need write access to these files, thus
write access can be blocked.

Closes-Bug: #2068898
Change-Id: I8b11fbdb0ea0ca814b962dd72b5c1cb4cd201c24 "
openstack/puppet-swift,manifests/objectexpirer.pp,"Set appropriate ownership/permission to config files

... to avoid making any config files world readable.

Also swift processes do not need write access to these files, thus
write access can be blocked.

Closes-Bug: #2068898
Change-Id: I8b11fbdb0ea0ca814b962dd72b5c1cb4cd201c24 "
openstack/puppet-swift,manifests/proxy.pp,"Set appropriate ownership/permission to config files

... to avoid making any config files world readable.

Also swift processes do not need write access to these files, thus
write access can be blocked.

Closes-Bug: #2068898
Change-Id: I8b11fbdb0ea0ca814b962dd72b5c1cb4cd201c24 "
openstack/puppet-swift,manifests/proxy/ceilometer.pp,"Set appropriate ownership/permission to config files

... to avoid making any config files world readable.

Also swift processes do not need write access to these files, thus
write access can be blocked.

Closes-Bug: #2068898
Change-Id: I8b11fbdb0ea0ca814b962dd72b5c1cb4cd201c24 "
openstack/puppet-swift,manifests/storage/drive_audit.pp,"Set appropriate ownership/permission to config files

... to avoid making any config files world readable.

Also swift processes do not need write access to these files, thus
write access can be blocked.

Closes-Bug: #2068898
Change-Id: I8b11fbdb0ea0ca814b962dd72b5c1cb4cd201c24 "
openstack/puppet-swift,manifests/storage/server.pp,"Set appropriate ownership/permission to config files

... to avoid making any config files world readable.

Also swift processes do not need write access to these files, thus
write access can be blocked.

Closes-Bug: #2068898
Change-Id: I8b11fbdb0ea0ca814b962dd72b5c1cb4cd201c24 "
openstack/puppet-swift,manifests/proxy/keymaster.pp,"Add keymaster middleware

Add support for configuring swift-proxy keymaster middleware. The
keymaster middleware handles keys for swift encryption[1].

[1] https://docs.openstack.org/swift/latest/overview_encryption.html

Change-Id: Ic6c34c5381eb4f57642493b5acf127dba4f7834e"
openstack/puppet-swift,manifests/containerreconciler.pp,"Merge ""Ensure app/filter factory options exist"""
openstack/puppet-swift,manifests/objectexpirer.pp,"Merge ""Ensure app/filter factory options exist"""
openstack/puppet-swift,manifests/containerreconciler.pp,"Ensure app/filter factory options exist

All middleware filters and apps enabled in pipeline should have
the corresponding factory option (use = ... ) but the lines may not
exist in case the config file does not exist or is generated in advance
incompletely.

Change-Id: I714fe28547ea8308d7e82b66687ea0f24f816cda"
openstack/puppet-swift,manifests/objectexpirer.pp,"Ensure app/filter factory options exist

All middleware filters and apps enabled in pipeline should have
the corresponding factory option (use = ... ) but the lines may not
exist in case the config file does not exist or is generated in advance
incompletely.

Change-Id: I714fe28547ea8308d7e82b66687ea0f24f816cda"
openstack/puppet-swift,manifests/storage/all.pp,"Expose log_name_per_daemon configurable

Add the log_name_per_daemon parameter to the all class so that this
parameter can be customized via the simplified definition.

Change-Id: I34989778f607db869d7acd1787682f5a8c97be5b"
openstack/puppet-heat,manifests/engine.pp,"Add support for [DEFAULT] max_cinder_api_microversion

Depends-on: https://review.opendev.org/930359
Change-Id: I217a4a1b4b8f52b451fde1b71a648a2ef7caa1ce"
openstack/puppet-heat,manifests/init.pp,"Expose parameter to customize [oslo_messaging_notifications] retry

The parameter has been managed by puppet-oslo, but its value could not
be set via this module.

Change-Id: I30b71bb4ecf654d54245bf9da7bcf0f19d110aca"
openstack/puppet-heat,manifests/init.pp,"Merge ""Add support for [oslo_messaging_rabbit] enable_cancel_on_failover"""
openstack/puppet-heat,manifests/init.pp,"Add support for [oslo_messaging_rabbit] enable_cancel_on_failover

Depends-on: https://review.opendev.org/928440
Change-Id: Ia906577dfe896c95e9c20e35d5278a4f3f6b73cf"
openstack/puppet-heat,manifests/engine.pp,"Support [DEFAULT] max_*_api_microversion options

These options can be used to override the maximum api microversion
available in the deployment.

Change-Id: I637437d729d02fdb1041d5a5a3a0cb6194b7a981"
openstack/puppet-heat,manifests/logging.pp,"logging: Deprecate watch_log_file

This option was deprecated in oslo.log 6.0.0 [1]. Because the warning
to catch usage of the parameter is implemented in the underlying
oslo::log defined resource type, no additional warning message is
implemented in this module.

[1] https://review.opendev.org/914788

Depends-on: https://review.opendev.org/930126
Change-Id: I6a74b4922760362e35dd02f6e0ca6c139fd5ff86"
openstack/puppet-heat,manifests/keystone/auth.pp,"Add validations for keystone resource parameters

The underlying implementation already have type validations. Inherit
these and make a few adjustment so that validation failures are raised
from the external interface layer instead of the internal interface.

Change-Id: I9686e6177f22bb64ecbae3d47169538bee4993b1"
openstack/puppet-heat,manifests/keystone/auth_cfn.pp,"Add validations for keystone resource parameters

The underlying implementation already have type validations. Inherit
these and make a few adjustment so that validation failures are raised
from the external interface layer instead of the internal interface.

Change-Id: I9686e6177f22bb64ecbae3d47169538bee4993b1"
openstack/puppet-heat,manifests/engine.pp,"Merge ""Add support for [DEFAULT] hidden_stack_tags"""
openstack/puppet-heat,manifests/init.pp,"Merge ""Expose rabbit_qos_prefetch_count"""
openstack/puppet-heat,manifests/engine.pp,"Add support for [DEFAULT] hidden_stack_tags

Change-Id: I753751dab926f84c4596e08ee98e7bc4f6141890"
openstack/puppet-heat,manifests/init.pp,"Expose rabbit_qos_prefetch_count

The option was supported by puppet-oslo but was not configurable via
this module.

Change-Id: Ia1791f7cc12f1e56a2db58c1e7966c2547d9ef75"
openstack/puppet-heat,manifests/init.pp,"Merge ""Add support for [DEFAULT] template_fetch_timeout option"""
openstack/puppet-heat,manifests/init.pp,"Add support for [DEFAULT] template_fetch_timeout option

Depends-on: https://review.opendev.org/914741
Change-Id: I850a399d9d0becd6018562f9a39680d741c22268"
openstack/puppet-heat,manifests/clients/sahara.pp,"Merge ""Deprecate heat::clients::sahara"""
openstack/puppet-heat,manifests/clients/sahara.pp,"Deprecate heat::clients::sahara

Heat deprecated and even removed sahara support, because the sahara
project was retired.

Change-Id: I3b34e2d88ba1ed83af8e7b18bc77ed652bb94f43"
openstack/puppet-heat,manifests/healthcheck.pp,"Add support for [healthcheck] enable_by_file_paths

Depends-on: https://review.opendev.org/923648
Change-Id: I5fb2fbd0044a208238d395fb62a6c96faf19522e"
openstack/puppet-heat,manifests/init.pp,"Merge ""Remove support for amqp1 messaging driver"""
openstack/puppet-heat,manifests/init.pp,"Remove support for amqp1 messaging driver

The base implementation in puppet-oslo was deprecated during the 2023.2
cycle[1], so can be removed now.

[1] e174113210699b433dbae4c2c5a68bc3d269b5c3

Change-Id: Iec6d9b66e5c1087ae4688d83d6ec646db4a41f2a"
openstack/puppet-heat,manifests/engine.pp,"Validate auth_encryption_key by date type

Change-Id: Ifa45975c23588da8a5f57d30bd0206044fa70d55"
openstack/puppet-heat,types/authencryptionkey.pp,"Validate auth_encryption_key by date type

Change-Id: Ifa45975c23588da8a5f57d30bd0206044fa70d55"
openstack/puppet-heat,manifests/cron/purge_deleted.pp,"validate maxdelay for cron job

The parameter descriptions says the value should be a positive integer
(or 0). Validate the given value to reject invalid values such as
strings or even negative values.

Change-Id: I21ecb74717c27db8f6a885dc7f70362a3d67f77a"
openstack/puppet-heat,manifests/engine.pp,"Add support for new limit options

This introduces support for the new limit options which were added to
heat during 2024.1 cycle.

Depends-on: https://review.opendev.org/c/openstack/heat/+/906272
Change-Id: I622328a61ea24682dbe65dc4f4b3a90df5c7208f"
openstack/puppet-ceph,manifests/key.pp,"Use Stdlib::Filemode to validate file mode parameter

Change-Id: Ief6a5b8602fd8c67e291702d909ab11cd3e4e893"
openstack/puppet-ceph,manifests/fs.pp,"Get rid of script workaround for single command calls

... to simplify the command called by the exec resources.

Change-Id: Ib7942c0795532bfe4448225fe64767dcebf1a537"
openstack/puppet-ceph,manifests/pool.pp,"Get rid of script workaround for single command calls

... to simplify the command called by the exec resources.

Change-Id: Ib7942c0795532bfe4448225fe64767dcebf1a537"
openstack/puppet-ceph,manifests/rgw/keystone/auth.pp,"Merge ""Use common resource to manage keystone resources"""
openstack/puppet-ceph,manifests/fs.pp,"Merge ""Ensure appropriate value type for exec timeout"""
openstack/puppet-ceph,manifests/mon.pp,"Merge ""Ensure appropriate value type for exec timeout"""
openstack/puppet-ceph,manifests/osd.pp,"Merge ""Ensure appropriate value type for exec timeout"""
openstack/puppet-ceph,manifests/params.pp,"Merge ""Ensure appropriate value type for exec timeout"""
openstack/puppet-ceph,manifests/pool.pp,"Merge ""Ensure appropriate value type for exec timeout"""
openstack/puppet-ceph,manifests/key.pp,"Merge ""Refactor ceph::key"""
openstack/puppet-ceph,manifests/fs.pp,"Ensure appropriate value type for exec timeout

The exec timeout should be a float value. This adds parameter types
so that only the expected value type is accepted.

Change-Id: I2ae7439599b056b56f3bb634cabcc2813700691a"
openstack/puppet-ceph,manifests/mon.pp,"Ensure appropriate value type for exec timeout

The exec timeout should be a float value. This adds parameter types
so that only the expected value type is accepted.

Change-Id: I2ae7439599b056b56f3bb634cabcc2813700691a"
openstack/puppet-ceph,manifests/osd.pp,"Ensure appropriate value type for exec timeout

The exec timeout should be a float value. This adds parameter types
so that only the expected value type is accepted.

Change-Id: I2ae7439599b056b56f3bb634cabcc2813700691a"
openstack/puppet-ceph,manifests/params.pp,"Ensure appropriate value type for exec timeout

The exec timeout should be a float value. This adds parameter types
so that only the expected value type is accepted.

Change-Id: I2ae7439599b056b56f3bb634cabcc2813700691a"
openstack/puppet-ceph,manifests/pool.pp,"Ensure appropriate value type for exec timeout

The exec timeout should be a float value. This adds parameter types
so that only the expected value type is accepted.

Change-Id: I2ae7439599b056b56f3bb634cabcc2813700691a"
openstack/puppet-ceph,manifests/key.pp,"Refactor ceph::key

This change refactors the ceph::key defined resource type so that
unnecessary spaces are removed from commands.

Change-Id: I2cdd9b3c9bac086a57cda67430eba0f0826744b3"
openstack/puppet-ceph,manifests/osd.pp,"ceph::osd: Replace redundant handling of cluster default

Change-Id: I865db9f5975fb32a567f5deb016f75cc7c10c8b1"
openstack/puppet-ceph,manifests/rgw/keystone/auth.pp,"Use common resource to manage keystone resources

The puppet-keystone module provides the common defined resource type to
manage all resources needed to integrate a service to keystone. This
replaces the existing bare implementation by the common resource.

Change-Id: Ibec4407b2816869d62478de0ea5a780a70c08ffb"
openstack/puppet-ceph,manifests/rgw/keystone/auth.pp,"Remove deprecated rgw_service

... which was deprecated in 5.0.0 [1].

[1] f5c1cf3ad5760d55cdefe38011ae7785d3c054fa

Related-Bug: #2029009
Change-Id: I1d75dce1f4a74c19210f9e5de673d76bdfecd1e5 "
openstack/puppet-ceph,manifests/rgw.pp,"Merge ""RGW: Add warning about civetweb and fastcgi"""
openstack/puppet-ceph,manifests/repo.pp,"Merge ""Remove support for CentOS 8 (non-stream)"""
openstack/puppet-ceph,manifests/rgw/apache_proxy_fcgi.pp,"Merge ""rgw: Use native class to enable mod-proxy_fcgi"""
openstack/puppet-ceph,manifests/rgw/apache_proxy_fcgi.pp,"rgw: Use native class to enable mod-proxy_fcgi

puppetlabs-apache provides the native class since 1.9.0[1].

[1] https://github.com/puppetlabs/puppetlabs-apache/commit/71cb7302f2d83d5a293dc22f22bb0b955b66684c

Change-Id: I73474920b854034c2475df3d583f8fb8d8a5d538"
openstack/puppet-ceph,manifests/rgw.pp,"RGW: Add warning about civetweb and fastcgi

These frontneds have been removed in quincy release[1].

[1] https://github.com/ceph/ceph/commit/1627d6c76a906da1ea99c721443135ff9c07db43

Change-Id: Ib6d2055beee21e3dbc56a8f577437ebc7ca986bd"
openstack/puppet-ceph,manifests/repo.pp,"Remove support for CentOS 8 (non-stream)

CentOS 8 reached its EOL a while ago. Because we already removed
support for CentOS 7, we no longer support any non-stream CentOS
versions.

This deprecates the stream parameter and makes the stream repository
used always.

Change-Id: Iba3c8aea2f6dd8b9cca17ed1468a43d6c7d39b53"
openstack/puppet-designate,manifests/init.pp,"Expose parameter to customize [oslo_messaging_notifications] retry

The parameter has been managed by puppet-oslo, but its value could not
be set via this module.

Change-Id: Ia5d586d36f85627d961b26d9374af3b1bb275b47"
openstack/puppet-designate,manifests/init.pp,"Add support for [oslo_messaging_rabbit] enable_cancel_on_failover

Depends-on: https://review.opendev.org/928440
Change-Id: I4d8e37f5f6e02df7f405c555b6f1c8e0c01265f3"
openstack/puppet-designate,manifests/init.pp,"Expose tunable options for RabbitMQ heartbeat

These have been supported by puppet-oslo, but haven't been configurable
in this module.

Change-Id: I7dbb782f2b95f9bc2f0b7a98fe1363f9ef74475f"
openstack/puppet-designate,manifests/logging.pp,"logging: Deprecate watch_log_file

This option was deprecated in oslo.log 6.0.0 [1]. Because the warning
to catch usage of the parameter is implemented in the underlying
oslo::log defined resource type, no additional warning message is
implemented in this module.

[1] https://review.opendev.org/914788

Depends-on: https://review.opendev.org/930126
Change-Id: I0cdc0f69d8730bef996ded667e9b8ea2ea5a5d95"
openstack/puppet-designate,manifests/keystone/auth.pp,"Merge ""Adjust default service description"""
openstack/puppet-designate,manifests/keystone/auth.pp,"Merge ""Add validations for keystone resource parameters"""
openstack/puppet-designate,manifests/keystone/auth.pp,"Adjust default service description

'DNS', instead of 'DNSaas', is used as a service name in the designate
installation documentation.

Change-Id: Iad06a23e1e861769ea355727111356a09a198f74"
openstack/puppet-designate,manifests/keystone/auth.pp,"Add validations for keystone resource parameters

The underlying implementation already have type validations. Inherit
these and make a few adjustment so that validation failures are raised
from the external interface layer instead of the internal interface.

Change-Id: Ie9d5068f613be15c9555f129a130a19112556acb"
openstack/puppet-designate,manifests/init.pp,"Merge ""Expose rabbit_qos_prefetch_count"""
openstack/puppet-designate,manifests/init.pp,"Expose rabbit_qos_prefetch_count

The option was supported by puppet-oslo but was not configurable via
this module.

Change-Id: I1ade5abda675b9ddc5a759b26c02c18cacf22191"
openstack/puppet-designate,manifests/init.pp,"Fix inconsistent default notification driver

Use the os_service_default fact, which effectively means noop
notification driver, because it is a more commonly used default.

Closes-Bug: #2079986
Change-Id: I8baaf613036b943490c874ac1edbbb5ee623480c "
openstack/puppet-designate,manifests/producer_task/increment_serial.pp,"Merge ""Add support for [producer_task] increment_serial options"""
openstack/puppet-designate,manifests/healthcheck.pp,"Merge ""Add support for [healthcheck] enable_by_file_paths"""
openstack/puppet-designate,manifests/healthcheck.pp,"Add support for [healthcheck] enable_by_file_paths

Depends-on: https://review.opendev.org/923648
Change-Id: I025be282ee70b79a23393fd35354f4cb426bb74b"
openstack/puppet-designate,manifests/producer_task/increment_serial.pp,"Add support for [producer_task] increment_serial options

... which were added a few cycles ago.

Depends-on: https://review.opendev.org/871255
Change-Id: I0b5c35a2e52022d8685be62efc471ce41ca9da1e"
openstack/puppet-designate,manifests/backend/bind9.pp,"Remove configuration of BIND 9 service

The feature was deprecated in 2024.1 release[1] and is ready for
removal.

Note that the configure_bind parameter is still kept, because
the parameter had to be set to disable the configuration. It may be
removed after 2025.1 release.

[1] 2896fe16c001d8ed3bad130ff6ddc83db819f2bb

Change-Id: I3b84a382608bbf094cfc5b48bb0ced848e73b2f1"
openstack/puppet-designate,manifests/backend/bind9.pp,"Remove deprecated manage_pool parameters

The parameters were deprecated in the 2024.1 release[1] so are ready
for removal.

[1] e19976ade6608db3abb084a58be5aed7657e5f7a

Change-Id: I4e62059dced674c9a2d3384db36b32d164341dd4"
openstack/puppet-designate,manifests/backend/pdns4.pp,"Remove deprecated manage_pool parameters

The parameters were deprecated in the 2024.1 release[1] so are ready
for removal.

[1] e19976ade6608db3abb084a58be5aed7657e5f7a

Change-Id: I4e62059dced674c9a2d3384db36b32d164341dd4"
openstack/puppet-designate,manifests/mdns.pp,"Merge ""mdns: Clean up deprecated parameters"""
openstack/puppet-designate,manifests/mdns.pp,"mdns: Clean up deprecated parameters

These parameters were deprecated during the previous cycle.

Change-Id: If430c7278c86c8be8a11834260ca13883a09d4eb"
openstack/puppet-designate,manifests/backend/bind9.pp,"Support customizing pool attributes

Change-Id: Ic3093b91eddeeadbf9fb751df905e259a6f5c6c5"
openstack/puppet-designate,manifests/backend/pdns4.pp,"Support customizing pool attributes

Change-Id: Ic3093b91eddeeadbf9fb751df905e259a6f5c6c5"
openstack/puppet-designate,templates/bind9-pools.yaml.erb,"Support customizing pool attributes

Change-Id: Ic3093b91eddeeadbf9fb751df905e259a6f5c6c5"
openstack/puppet-designate,templates/pdns4-pools.yaml.erb,"Support customizing pool attributes

Change-Id: Ic3093b91eddeeadbf9fb751df905e259a6f5c6c5"
openstack/puppet-designate,manifests/init.pp,"Merge ""Expose rabbit_transient_quorum_queue"""
openstack/puppet-ironic,manifests/drivers/drac.pp,"Merge ""drac: Improve parameter coverage"""
openstack/puppet-ironic,manifests/drivers/drac.pp,"Merge ""drac: Stop installing dracclient"""
openstack/puppet-ironic,manifests/params.pp,"Merge ""drac: Stop installing dracclient"""
openstack/puppet-ironic,manifests/drivers/drac.pp,"Merge ""drac: Install sushy-oem-idrac"""
openstack/puppet-ironic,manifests/params.pp,"Merge ""drac: Install sushy-oem-idrac"""
openstack/puppet-ironic,manifests/init.pp,"Expose parameter to customize [oslo_messaging_notifications] retry

The parameter has been managed by puppet-oslo, but its value could not
be set via this module.

Change-Id: I1351ec585bb22e18cb5bfa1db9c688d02d1c72ec"
openstack/puppet-ironic,manifests/drivers/drac.pp,"drac: Improve parameter coverage

Change-Id: I4eb6ebd277e2edb15a2d13f5ffd204d9f9265159"
openstack/puppet-ironic,manifests/drivers/drac.pp,"drac: Stop installing dracclient

... because the old wsman interfaces were removed during this cycle.

Related-Bug: #2082235
Depends-on: https://review.opendev.org/922340
Change-Id: Id32a2663a988038652c184b192e407b73964c85c "
openstack/puppet-ironic,manifests/params.pp,"drac: Stop installing dracclient

... because the old wsman interfaces were removed during this cycle.

Related-Bug: #2082235
Depends-on: https://review.opendev.org/922340
Change-Id: Id32a2663a988038652c184b192e407b73964c85c "
openstack/puppet-ironic,manifests/drivers/drac.pp,"drac: Install sushy-oem-idrac

The library is required to use the new redfish interfaces which
replaced the old wsman interfaces.

Closes-Bug: #2082235
Change-Id: I19ba7f96f8201f0a6a615bb6d287883af337bba1 "
openstack/puppet-ironic,manifests/params.pp,"drac: Install sushy-oem-idrac

The library is required to use the new redfish interfaces which
replaced the old wsman interfaces.

Closes-Bug: #2082235
Change-Id: I19ba7f96f8201f0a6a615bb6d287883af337bba1 "
openstack/puppet-ironic,manifests/init.pp,"Add support for [oslo_messaging_rabbit] enable_cancel_on_failover

Depends-on: https://review.opendev.org/928440
Change-Id: I3428ef6ee01002a9b8ef20037640d5d20c3dabad"
openstack/puppet-ironic,manifests/inspector.pp,"Add support for [oslo_messaging_rabbit] enable_cancel_on_failover

Depends-on: https://review.opendev.org/928440
Change-Id: I3428ef6ee01002a9b8ef20037640d5d20c3dabad"
openstack/puppet-ironic,manifests/inspector/logging.pp,"Merge ""logging: Deprecate watch_log_file"""
openstack/puppet-ironic,manifests/logging.pp,"Merge ""logging: Deprecate watch_log_file"""
openstack/puppet-ironic,manifests/inspector/logging.pp,"logging: Deprecate watch_log_file

This option was deprecated in oslo.log 6.0.0 [1]. Because the warning
to catch usage of the parameter is implemented in the underlying
oslo::log defined resource type, no additional warning message is
implemented in this module.

[1] https://review.opendev.org/914788

Depends-on: https://review.opendev.org/930126
Change-Id: I293750b4efe204e3924cdec800f28f8333966a24"
openstack/puppet-ironic,manifests/logging.pp,"logging: Deprecate watch_log_file

This option was deprecated in oslo.log 6.0.0 [1]. Because the warning
to catch usage of the parameter is implemented in the underlying
oslo::log defined resource type, no additional warning message is
implemented in this module.

[1] https://review.opendev.org/914788

Depends-on: https://review.opendev.org/930126
Change-Id: I293750b4efe204e3924cdec800f28f8333966a24"
openstack/puppet-ironic,manifests/drivers/inspector.pp,"Make ironic-inspector password optional

The credential to interact with ironic-inspector is not needed when
only in-bound introspection is used.

Change-Id: Ife067d97f9a8affbbce398b52a4178f59d5533e3"
openstack/puppet-ironic,manifests/drivers/inspector.pp,"Support more options for inbound inspection

This fills the gap between the supported ironic-inspector options and
the supported inbound inspector options.

Change-Id: If599f0a0e3621f35492ac01c615f83d77657c6c1"
openstack/puppet-ironic,manifests/inspector.pp,"Support more options for inbound inspection

This fills the gap between the supported ironic-inspector options and
the supported inbound inspector options.

Change-Id: If599f0a0e3621f35492ac01c615f83d77657c6c1"
openstack/puppet-ironic,manifests/drivers/inspector.pp,"Support [inspector] require_managed_boot option

... because this needs to be set during transition to the new
in-band introspection.

Change-Id: Ica25c89be9f12fec242121fabb3f375ee7c73ea6"
openstack/puppet-ironic,manifests/keystone/auth.pp,"Merge ""Add validations for keystone resource parameters"""
openstack/puppet-ironic,manifests/keystone/auth_inspector.pp,"Merge ""Add validations for keystone resource parameters"""
openstack/puppet-ironic,manifests/keystone/auth.pp,"Add validations for keystone resource parameters

The underlying implementation already have type validations. Inherit
these and make a few adjustment so that validation failures are raised
from the external interface layer instead of the internal interface.

Change-Id: I846738f64e2c587579d063e1f99d4c0b071d4667"
openstack/puppet-ironic,manifests/keystone/auth_inspector.pp,"Add validations for keystone resource parameters

The underlying implementation already have type validations. Inherit
these and make a few adjustment so that validation failures are raised
from the external interface layer instead of the internal interface.

Change-Id: I846738f64e2c587579d063e1f99d4c0b071d4667"
openstack/puppet-ironic,manifests/inspector.pp,"Fix wrong default in parameter description

The standalone parameter defaults to true, not false.

Change-Id: I5c47d82c252aae998915d6f4b7cb34f6e013cb0b"
openstack/puppet-ironic,manifests/init.pp,"Merge ""Support [DEFAULT] host option"""
openstack/puppet-ironic,manifests/init.pp,"Merge ""Expose rabbit_qos_prefetch_count"""
openstack/puppet-ironic,manifests/inspector.pp,"Merge ""Expose rabbit_qos_prefetch_count"""
openstack/puppet-ironic,manifests/init.pp,"Support [DEFAULT] host option

... which is internally used as an opaque identifier.

Change-Id: I3591fbe25c4edc772825492be034361cdc492641"
openstack/puppet-ironic,manifests/init.pp,"Expose rabbit_qos_prefetch_count

The option was supported by puppet-oslo but was not configurable via
this module.

Change-Id: I468350ccc56984c28469ab9853ac4cc7519fdaae"
openstack/puppet-ironic,manifests/inspector.pp,"Expose rabbit_qos_prefetch_count

The option was supported by puppet-oslo but was not configurable via
this module.

Change-Id: I468350ccc56984c28469ab9853ac4cc7519fdaae"
openstack/puppet-ironic,manifests/conductor.pp,"Merge ""Support conductor options to determine max concurrency"""
openstack/puppet-ironic,manifests/conductor.pp,"Support conductor options to determine max concurrency

Change-Id: Ie3c0e789daa675ddf6eff1c8a831c65c4163dacc"
openstack/puppet-ironic,manifests/conductor.pp,"Support customizing [conductor] periodic_max_workers

Change-Id: I8f7be78393425ca67acca2752824c936326d76e5"
openstack/puppet-ironic,manifests/drivers/ipmi.pp,"Merge ""Support customization of [ipmi] store_cred_in_env"""
openstack/puppet-ironic,manifests/healthcheck.pp,"Merge ""Add support for [healthcheck] enable_by_file_paths"""
openstack/puppet-ironic,manifests/inspector/healthcheck.pp,"Merge ""Add support for [healthcheck] enable_by_file_paths"""
openstack/puppet-ironic,manifests/inspector/healthcheck.pp,"Merge ""inspector: Fix missing healthcheck options"""
openstack/puppet-ironic,manifests/healthcheck.pp,"Add support for [healthcheck] enable_by_file_paths

Depends-on: https://review.opendev.org/923648
Change-Id: I6d7fb809c76ab07139cb1f5253c682894fc0c4da"
openstack/puppet-ironic,manifests/inspector/healthcheck.pp,"Add support for [healthcheck] enable_by_file_paths

Depends-on: https://review.opendev.org/923648
Change-Id: I6d7fb809c76ab07139cb1f5253c682894fc0c4da"
openstack/puppet-ironic,manifests/drivers/ipmi.pp,"Support customization of [ipmi] store_cred_in_env

Depends-on: https://review.opendev.org/917229
Change-Id: Ica6ef75948a3f1d60b3a564afed8f26447b13e8e"
openstack/devstack-vagrant,puppet/modules/devstack/templates/local.erb,"Merge ""Add IP_VERSION in template, set default as ipv4 only"""
openstack/devstack-vagrant,puppet/modules/devstack/templates/local.erb,"Add IP_VERSION in template, set default as ipv4 only

For some environments (include mine), ipv6 instructions in stack.sh does not work.

Change-Id: I4b5c69f57191628664450330a08248aae05c2813"
openstack/devstack-vagrant,puppet/modules/devstack/manifests/init.pp,"Update git repo url to opendev

Change-Id: I2bd3fc3d86333cc6cba78f0f7003e310e8005a88"
openstack/devstack-vagrant,puppet/modules/grenade/manifests/init.pp,"Update git repo url to opendev

Change-Id: I2bd3fc3d86333cc6cba78f0f7003e310e8005a88"
openstack/devstack-vagrant,puppet/manifests/default.pp,"Update vagrant box version

Devstack master(Victoria) has dropped xenial distro, switch base box
version to bionic.

Bionic has puppet5 as default puppet version, which has faster puppet
class running in parallel, so devstack and grenade repos were being
checked out while /home/stack dir were still being created, impose puppet
class ordering.

Change-Id: I89af65ca8c53aa41407ed7e4ca0edef88daae3b9"
openstack/devstack-vagrant,puppet/modules/devstack/templates/local.erb,"make internal interface names configurable from config.yaml

Change-Id: Ia018f3a71073a7cfdb093096ba313292909f2675"
openstack/devstack-vagrant,puppet/manifests/default.pp,"make vagrant user configurable from config.yaml

RELATED_BUG: 1569237
RELATED_BUG: 1589721

Change-Id: I57b5c9ea124b071c6d31b8c825c9cb1d2e89a8ce"
openstack/devstack-vagrant,puppet/modules/user/manifests/vagrant.pp,"make vagrant user configurable from config.yaml

RELATED_BUG: 1569237
RELATED_BUG: 1589721

Change-Id: I57b5c9ea124b071c6d31b8c825c9cb1d2e89a8ce"
openstack/devstack-vagrant,puppet/modules/devstack/templates/local.erb,"Merge ""Add manager_extra_services to config.yaml and local.erb"""
openstack/devstack-vagrant,puppet/modules/devstack/manifests/init.pp,"Use git.openstack.org everywhere

Our official git master is at git.openstack.org, update places
that use github instead.

Change-Id: I21deb1246c4d83c6c8baaeb4dc45d78f2157460a"
openstack/devstack-vagrant,puppet/modules/grenade/manifests/init.pp,"Use git.openstack.org everywhere

Our official git master is at git.openstack.org, update places
that use github instead.

Change-Id: I21deb1246c4d83c6c8baaeb4dc45d78f2157460a"
openstack/devstack-vagrant,puppet/modules/devstack/templates/local.erb,"Remove Cirros URL from IMAGE_URLS

Devstack introduced DOWNLOAD_DEFAULT_IMAGES setting which
by default is True and extends IMAGE_URLS variable with
some default images, including Cirros. devstack-vagrant
also extends IMAGE_URLS with Cirros URL. This results in
error about duplicate entries in this variable.

Change-Id: I86f1ca5b9bef73e41657ce6fec17dd378d9e33ef
Closes-Bug: #1497533 "
openstack/devstack-vagrant,puppet/modules/devstack/templates/local.erb,"Add manager_extra_services to config.yaml and local.erb

Specify the additional services to enable on the manager node

Change-Id: I3154f0ca7ab4489a2510fe4f302f8a9fbfb87bd1"
openstack/devstack-vagrant,puppet/modules/devstack/templates/local.erb,"update cirros version

- update cirros to recent 0.3.4 as same version as devstack
- README: explain extra_images puppet config

Change-Id: Idc275d19a6e54212500b860bf4a0e476b60d4c69
Signed-off-by: Hiroshi Miura <miurahr@nttdata.co.jp>"
openstack/devstack-vagrant,puppet/modules/devstack/templates/local.erb,"Merge ""Add extra-images puppet variable"""
openstack/devstack-vagrant,puppet/modules/devstack/templates/local.erb,"Add extra-images puppet variable

If the user wants to use his own mirror to get extra images for glance
or wants to add more images not just the default cirros it can be done
using this custom variable on config.yaml

Change-Id: I121ba07f15427b926ddade36adfc60a89647a9d4"
openstack/puppet-trove,manifests/api.pp,"Use common defined resource type to manage ssl options

Change-Id: I1c8e2ad1d65a6ce5388695ee2a2ad66cbd3b6c29"
openstack/puppet-trove,manifests/init.pp,"Merge ""Deprecate ineffective rabbit_notification_topic"""
openstack/puppet-trove,manifests/guestagent.pp,"Drop notification options from guest agent

The trove-guest-agent service does not have implementations to send
notifications, so these options are not actually used.

Change-Id: I39f7b54313322ac805a436d7b5635b7d0f9b3824"
openstack/puppet-trove,manifests/guestagent.pp,"Expose parameter to customize [oslo_messaging_notifications] retry

The parameter has been managed by puppet-oslo, but its value could not
be set via this module.

Change-Id: If3e116d293d2ed1ed81e53a07bbff6415b9c1465"
openstack/puppet-trove,manifests/init.pp,"Expose parameter to customize [oslo_messaging_notifications] retry

The parameter has been managed by puppet-oslo, but its value could not
be set via this module.

Change-Id: If3e116d293d2ed1ed81e53a07bbff6415b9c1465"
openstack/puppet-trove,manifests/init.pp,"Deprecate ineffective rabbit_notification_topic

This parameter has never been used since the initial release (6.0.0).

Change-Id: I645475b504940a5caffd5a69ad95b83cab4033e2"
openstack/puppet-trove,manifests/guestagent.pp,"Add support for [oslo_messaging_rabbit] enable_cancel_on_failover

Depends-on: https://review.opendev.org/928440
Change-Id: I297aa13ac9c6d3dcc4c0b34fafe4ffefac86ee65"
openstack/puppet-trove,manifests/init.pp,"Add support for [oslo_messaging_rabbit] enable_cancel_on_failover

Depends-on: https://review.opendev.org/928440
Change-Id: I297aa13ac9c6d3dcc4c0b34fafe4ffefac86ee65"
openstack/puppet-trove,manifests/logging.pp,"logging: Deprecate watch_log_file

This option was deprecated in oslo.log 6.0.0 [1]. Because the warning
to catch usage of the parameter is implemented in the underlying
oslo::log defined resource type, no additional warning message is
implemented in this module.

[1] https://review.opendev.org/914788

Depends-on: https://review.opendev.org/930126
Change-Id: I2dd8e0d19113dafc7a45b485933e1f90439d1ac6"
openstack/puppet-trove,manifests/guestagent.pp,"Merge ""Expose rabbit_qos_prefetch_count"""
openstack/puppet-trove,manifests/init.pp,"Merge ""Expose rabbit_qos_prefetch_count"""
openstack/puppet-trove,manifests/guestagent.pp,"Merge ""guestagent: Inherit all rabbitmq options from base class"""
openstack/puppet-trove,manifests/guestagent.pp,"Expose rabbit_qos_prefetch_count

The option was supported by puppet-oslo but was not configurable via
this module.

Change-Id: Ib5af448ebf08136f9c9bcaf7d72ce0245456cdde"
openstack/puppet-trove,manifests/init.pp,"Expose rabbit_qos_prefetch_count

The option was supported by puppet-oslo but was not configurable via
this module.

Change-Id: Ib5af448ebf08136f9c9bcaf7d72ce0245456cdde"
openstack/puppet-trove,manifests/guestagent.pp,"guestagent: Inherit all rabbitmq options from base class

Ensure trove services at controller side and trove guest agents have
consistent configurations. Some options like quorum queue options
should have the same value in both sides.

Change-Id: I3b7f10082ed6554118e2d1f45b9ab7e2dcb567d7"
openstack/puppet-trove,manifests/keystone/auth.pp,"Add validations for keystone resource parameters

The underlying implementation already have type validations. Inherit
these and make a few adjustment so that validation failures are raised
from the external interface layer instead of the internal interface.

Change-Id: I5050785660166124331275bbac9d6f3f3bae62b7"
openstack/puppet-trove,manifests/healthcheck.pp,"Add support for [healthcheck] enable_by_file_paths

Depends-on: https://review.opendev.org/923648
Change-Id: I012e0c89bff2e8f03b93a9a4fb7e31e1e192a6b3"
openstack/puppet-trove,manifests/guestagent.pp,"Merge ""Remove support for amqp1 messaging driver"""
openstack/puppet-trove,manifests/init.pp,"Merge ""Remove support for amqp1 messaging driver"""
openstack/puppet-trove,manifests/guestagent.pp,"Remove support for amqp1 messaging driver

The base implementation in puppet-oslo was deprecated during the 2023.2
cycle[1], so can be removed now.

[1] e174113210699b433dbae4c2c5a68bc3d269b5c3

Change-Id: If2e2aaa9baf149c4f089b45621b4d592a6668ef1"
openstack/puppet-trove,manifests/init.pp,"Remove support for amqp1 messaging driver

The base implementation in puppet-oslo was deprecated during the 2023.2
cycle[1], so can be removed now.

[1] e174113210699b433dbae4c2c5a68bc3d269b5c3

Change-Id: If2e2aaa9baf149c4f089b45621b4d592a6668ef1"
openstack/puppet-trove,examples/site.pp,"Merge ""Remove trove::api::service_credentials"""
openstack/puppet-trove,manifests/api.pp,"Merge ""Remove trove::api::service_credentials"""
openstack/puppet-trove,manifests/api/service_credentials.pp,"Merge ""Remove trove::api::service_credentials"""
openstack/puppet-trove,manifests/init.pp,"Merge ""Remove single_tenant_mode parameter"""
openstack/puppet-trove,examples/site.pp,"Remove trove::api::service_credentials

The class was deprecated during the previous cycle[1] for renaming to
the trove::service_credentials class.

[1] 80a89f49a0f44d8deba8f50e6582d9acafac7cdd

Change-Id: Ica9f192337b654200024acc3b3fefb0dcab6e57d"
openstack/puppet-trove,manifests/api.pp,"Remove trove::api::service_credentials

The class was deprecated during the previous cycle[1] for renaming to
the trove::service_credentials class.

[1] 80a89f49a0f44d8deba8f50e6582d9acafac7cdd

Change-Id: Ica9f192337b654200024acc3b3fefb0dcab6e57d"
openstack/puppet-trove,manifests/api/service_credentials.pp,"Remove trove::api::service_credentials

The class was deprecated during the previous cycle[1] for renaming to
the trove::service_credentials class.

[1] 80a89f49a0f44d8deba8f50e6582d9acafac7cdd

Change-Id: Ica9f192337b654200024acc3b3fefb0dcab6e57d"
openstack/puppet-trove,manifests/init.pp,"Remove single_tenant_mode parameter

This parameter was deprecated[1] during the previous cycle because its
functionality has been broken for some time.

[1] 99c035e7208e844cc766a5a07d5beb16622f5b75

Related-Bug: #2058861
Change-Id: I1c2e6d7f2e6e40def584ef72cbf118970d36c83a "
openstack/puppet-trove,manifests/init.pp,"Merge ""Add support for [network] network_isolation"""
openstack/puppet-trove,manifests/init.pp,"Add support for [network] network_isolation

Change-Id: Ifdd4aad61df32ab4baba55eebaa9cf42567968c4"
openstack/puppet-manila,manifests/init.pp,"Merge ""Drop redundant hard-coded default of storage_availability_zone"""
openstack/puppet-manila,manifests/init.pp,"Drop redundant hard-coded default of storage_availability_zone

The actual option in manila defaults to 'nova', so the service default
fact can be used, instead of hard-coding the same value.

Change-Id: I5efffbb0bd376fcb6cdcd0402f94756c35ca1315"
openstack/puppet-manila,manifests/init.pp,"Use common defined resource type to manage ssl options

Change-Id: Ia8537d83844d0363fc8a1d9f0e7d3318af32f95e"
openstack/puppet-manila,manifests/init.pp,"Replace deprecated ssl options

The [DEFAULT] ssl_* options from oslo.service was deprecated in
oslo.service 0.10.1[1], which was released 9 years ago.

Also simplify the handling of ssl parameters to make it consistent with
puppet-cinder.

[1] 2e2940d1e17706b9d6367ff1783bde9d41891bfa

Change-Id: I0a52a5fb65c57f41fa981efe0d0f504cd9604ca3"
openstack/puppet-manila,manifests/init.pp,"Expose parameter to customize [oslo_messaging_notifications] retry

The parameter has been managed by puppet-oslo, but its value could not
be set via this module.

Change-Id: Ib7c9e3f84fc558425422c4626198cccd1c433c2e"
openstack/puppet-manila,manifests/init.pp,"Add support for [oslo_messaging_rabbit] enable_cancel_on_failover

Depends-on: https://review.opendev.org/928440
Change-Id: Ieda326d7c6b92fb6ac7797e55d6b6f4161a69c86"
openstack/puppet-manila,manifests/init.pp,"Expose tunable options for RabbitMQ heartbeat

These have been supported by puppet-oslo, but haven't been configurable
in this module.

Change-Id: I7fa9dd5e5405672424d8e96d01a2f7f2ae650bce"
openstack/puppet-manila,manifests/logging.pp,"logging: Deprecate watch_log_file

This option was deprecated in oslo.log 6.0.0 [1]. Because the warning
to catch usage of the parameter is implemented in the underlying
oslo::log defined resource type, no additional warning message is
implemented in this module.

[1] https://review.opendev.org/914788

Depends-on: https://review.opendev.org/930126
Change-Id: I0bb82b02d9a1b84303d4e7f6f5170fdeb410eaa3"
openstack/puppet-manila,manifests/keystone/auth.pp,"Merge ""Deprecate management of manila v2 user"""
openstack/puppet-manila,manifests/keystone/auth.pp,"Merge ""Do not create manila_v2 keystone user by default"""
openstack/puppet-manila,manifests/keystone/auth.pp,"Deprecate management of manila v2 user

Manila does not require the dedicated keystone user for share v2 API.
Deprecate the functionality to create the additional keystone user for
share v2 API to get rid of the unnecessary complexity.

Change-Id: I2ccc58e70e1c2734c6c3ef765d89a0898989429f"
openstack/puppet-manila,manifests/keystone/auth.pp,"Do not create manila_v2 keystone user by default

Manila service itself does not need the dedicated user to provide share
v2 API, and having the single manila user is enough.

Change-Id: I392109198247bd032c7c5014935a0c6cb9802f43"
openstack/puppet-manila,manifests/keystone/auth.pp,"Merge ""Add validations for keystone resource parameters"""
openstack/puppet-manila,manifests/keystone/auth.pp,"Add validations for keystone resource parameters

The underlying implementation already have type validations. Inherit
these and make a few adjustment so that validation failures are raised
from the external interface layer instead of the internal interface.

Change-Id: Ifeb305fc0aeb55031fd089dcb084d00edabc19cf"
openstack/puppet-manila,manifests/init.pp,"Merge ""Expose rabbit_qos_prefetch_count"""
openstack/puppet-manila,manifests/init.pp,"Expose rabbit_qos_prefetch_count

The option was supported by puppet-oslo but was not configurable via
this module.

Change-Id: I820ee7850fcd5561483a1b570e6c1ad3a2cc758a"
openstack/puppet-manila,manifests/init.pp,"Merge ""Fix inconsistent default notification driver"""
openstack/puppet-manila,manifests/init.pp,"Fix inconsistent default notification driver

Use the os_service_default fact, which effectively means noop
notification driver, because it is a more commonly used default.

Closes-Bug: #2079986
Change-Id: Ia0d3fcf2b4a951144a4c03732f5a637e40c68aeb "
openstack/puppet-manila,manifests/init.pp,"Merge ""Add parameter to customize [DEFAULT] service_down_time"""
openstack/puppet-manila,manifests/init.pp,"Add parameter to customize [DEFAULT] service_down_time

The service_down_time option may need to be tuned in some deployments
(eg. large deployment with high load in rabbitmq).

Add a native parameter to customize the option.

Change-Id: I18a5370228fa90017d3e81707c7dcdbba8c52eb5"
openstack/puppet-manila,manifests/backend/cephfs.pp," Add support for the cephfs_nfs_cluster_id parameter

Change-Id: Id2b3e800a9ca5f50d050f15f8c0d136626cc8e51"
openstack/puppet-manila,manifests/healthcheck.pp,"Add support for [healthcheck] enable_by_file_paths

Depends-on: https://review.opendev.org/923648
Change-Id: Id0645628a0a8b7649412c63555d3f8b539d9348c"
openstack/puppet-manila,manifests/init.pp,"Merge ""Remove support for amqp1 messaging driver"""
openstack/puppet-manila,manifests/init.pp,"Remove support for amqp1 messaging driver

The base implementation in puppet-oslo was deprecated during the 2023.2
cycle[1], so can be removed now.

[1] e174113210699b433dbae4c2c5a68bc3d269b5c3

Change-Id: I212d2186d30ab4be5171138cf57150f00ea19a59"
openstack/puppet-manila,manifests/client.pp,"Merge ""client: Install openstackclient"""
openstack/puppet-manila,manifests/api.pp,"Merge ""Replace deprecated keystone::client"""
openstack/puppet-manila,manifests/client.pp,"client: Install openstackclient

The manila CLI was already deprecated in favor of the openstack CLI
plugin[1]. Install openstackclient when client is requested so that
the openstack CLI can be used.

[1] ba9a3887869ecd4cbed4aeb43c11a3d9493fafa2

Change-Id: I4589f6d74b3f4b6b88333306eb013b91fc0a9d44"
openstack/puppet-gnocchi,manifests/logging.pp,"Merge ""logging: Deprecate unused watch_log_file option"""
openstack/puppet-gnocchi,manifests/logging.pp,"logging: Deprecate unused watch_log_file option

Gnocchi no longer uses oslo.log so this functionality hasn't been
available for some time.

Change-Id: Ic388b6a23ccdbb7fae58592d6ac9bd8c239954ff"
openstack/puppet-gnocchi,manifests/keystone/auth.pp,"Add validations for keystone resource parameters

The underlying implementation already have type validations. Inherit
these and make a few adjustment so that validation failures are raised
from the external interface layer instead of the internal interface.

Change-Id: I1e3c50d17cb83cd11f61ac1e91c4b7affc05957a"
openstack/puppet-gnocchi,manifests/storage/swift.pp,"Merge ""Add support for [storage] swift_container_prefix"""
openstack/puppet-gnocchi,manifests/storage/incoming/file.pp,"Merge ""Fix additional override for file incoming driver"""
openstack/puppet-gnocchi,manifests/storage/swift.pp,"Add support for [storage] swift_container_prefix

Change-Id: I75db464e050d236baa38de396f5e1be90e9f3f58"
openstack/puppet-gnocchi,manifests/storage/incoming/file.pp,"Fix additional override for file incoming driver

Gnocchi replicates storage options into the [incoming] section so that
users can use different values for storage driver and incoming driver.

Change-Id: I2be21fea2464ef5b9e558faae7123e507022a847"
openstack/puppet-gnocchi,manifests/storage/ceph.pp,"ceph: Simplify parameter validations

Use undef rather than the os_service_default fact to more easily
detect whether the parameters are set by users.

Change-Id: I086810840d0db82accb9fea1b0a1df2d8242926c"
openstack/puppet-gnocchi,manifests/healthcheck.pp,"Add support for [healthcheck] enable_by_file_paths

Depends-on: https://review.opendev.org/923648
Change-Id: I6f01cc22ee62e3cf89e33df4dbb2000ed51536e9"
openstack/puppet-gnocchi,manifests/db/sync.pp,"Stop hard-coding config file for db sync

The gnocchi-upgrade command by default loads /etc/gnocchi/gnocchi.conf.
Removing the override allows us to use additional paths such as
gnocchi.conf.d in the future.

Change-Id: Ibe0c1138eebeb17fb6d06a7e648eab563f47fe1f"
openstack/puppet-gnocchi,manifests/api.pp,"Refactor resource dependencies

This refactors resource dependencies to improve the following points.

 - Avoid unnecessary dependencies across services. For example aodh
   service does not require cinder db.

 - Restart only api service when config files like paste.ini, which
   are used only be api service is changed.

Change-Id: Ib89091baaf9aba0809c2e9405389545168b755ec"
openstack/puppet-gnocchi,manifests/db.pp,"Refactor resource dependencies

This refactors resource dependencies to improve the following points.

 - Avoid unnecessary dependencies across services. For example aodh
   service does not require cinder db.

 - Restart only api service when config files like paste.ini, which
   are used only be api service is changed.

Change-Id: Ib89091baaf9aba0809c2e9405389545168b755ec"
openstack/puppet-gnocchi,manifests/deps.pp,"Refactor resource dependencies

This refactors resource dependencies to improve the following points.

 - Avoid unnecessary dependencies across services. For example aodh
   service does not require cinder db.

 - Restart only api service when config files like paste.ini, which
   are used only be api service is changed.

Change-Id: Ib89091baaf9aba0809c2e9405389545168b755ec"
openstack/puppet-gnocchi,manifests/init.pp,"Refactor resource dependencies

This refactors resource dependencies to improve the following points.

 - Avoid unnecessary dependencies across services. For example aodh
   service does not require cinder db.

 - Restart only api service when config files like paste.ini, which
   are used only be api service is changed.

Change-Id: Ib89091baaf9aba0809c2e9405389545168b755ec"
openstack/puppet-gnocchi,manifests/keystone/authtoken.pp,"Refactor resource dependencies

This refactors resource dependencies to improve the following points.

 - Avoid unnecessary dependencies across services. For example aodh
   service does not require cinder db.

 - Restart only api service when config files like paste.ini, which
   are used only be api service is changed.

Change-Id: Ib89091baaf9aba0809c2e9405389545168b755ec"
openstack/puppet-gnocchi,manifests/policy.pp,"Refactor resource dependencies

This refactors resource dependencies to improve the following points.

 - Avoid unnecessary dependencies across services. For example aodh
   service does not require cinder db.

 - Restart only api service when config files like paste.ini, which
   are used only be api service is changed.

Change-Id: Ib89091baaf9aba0809c2e9405389545168b755ec"
openstack/puppet-gnocchi,manifests/healthcheck.pp,"Merge ""healthcheck: Expose ignore_proxied_requests parameter"""
openstack/puppet-gnocchi,manifests/healthcheck.pp,"healthcheck: Expose ignore_proxied_requests parameter

Depends-on: https://review.opendev.org/909807
Change-Id: Ibdc5ac824241d1638fcf6066d2f51601792fcd6b"
openstack/puppet-gnocchi,manifests/healthcheck.pp,"healthcheck: Expose allowed_source_ranges

... which was added to puppet-oslo recently.

Depends-on: https://review.opendev.org/905557
Change-Id: I671ab529cee053f59e611e119af93d7123756e2a"
openstack/puppet-openstack-cookiecutter,puppet-{{cookiecutter.project_name}}/manifests/logging.pp,"Drop hard-coded log_file

Because the service config file is shared among multiple services,
we should not set the option without any specific reason. In case
the option is not set (and no --log-file argument is passed) then
log file name is determined according to the process name, and each
service creates its own file.

Change-Id: Iadaf4eceb0a052bef437603d6cbe6422f4ee9b13"
openstack/puppet-openstack-cookiecutter,puppet-{{cookiecutter.project_name}}/manifests/logging.pp,"logging: Drop watch_log_file

This option was deprecated in oslo.log 6.0.0 [1].

[1] https://review.opendev.org/914788

Change-Id: I18d26f6bc59fe6007f40c5b410e2571c01b2b2f4"
openstack/puppet-openstack-cookiecutter,puppet-{{cookiecutter.project_name}}/manifests/db.pp,"Refactor resource dependencies

This refactors resource dependencies to avoid unnecessary dependencies
across services.

Change-Id: I0f0c12f77eb39cb1d1c68fe2b02050ada257aabb"
openstack/puppet-openstack-cookiecutter,puppet-{{cookiecutter.project_name}}/manifests/deps.pp,"Refactor resource dependencies

This refactors resource dependencies to avoid unnecessary dependencies
across services.

Change-Id: I0f0c12f77eb39cb1d1c68fe2b02050ada257aabb"
openstack/puppet-openstack-cookiecutter,puppet-{{cookiecutter.project_name}}/manifests/keystone/authtoken.pp,"Refactor resource dependencies

This refactors resource dependencies to avoid unnecessary dependencies
across services.

Change-Id: I0f0c12f77eb39cb1d1c68fe2b02050ada257aabb"
openstack/puppet-openstack-cookiecutter,puppet-{{cookiecutter.project_name}}/manifests/policy.pp,"Refactor resource dependencies

This refactors resource dependencies to avoid unnecessary dependencies
across services.

Change-Id: I0f0c12f77eb39cb1d1c68fe2b02050ada257aabb"
openstack/puppet-openstack-cookiecutter,puppet-{{cookiecutter.project_name}}/manifests/config.pp,"replace validate_legacy with proper data types

the validate_legacy function is marked for deprecation in
v9.0.0 from puppetlabs-stdlib.

This also adds the type enforcement about purge_config which accepts
only boolean values.

Change-Id: I243572f19564a18003c3de66c1248f0f215bae65"
openstack/puppet-openstack-cookiecutter,puppet-{{cookiecutter.project_name}}/manifests/db/mysql.pp,"replace validate_legacy with proper data types

the validate_legacy function is marked for deprecation in
v9.0.0 from puppetlabs-stdlib.

This also adds the type enforcement about purge_config which accepts
only boolean values.

Change-Id: I243572f19564a18003c3de66c1248f0f215bae65"
openstack/puppet-openstack-cookiecutter,puppet-{{cookiecutter.project_name}}/manifests/policy.pp,"replace validate_legacy with proper data types

the validate_legacy function is marked for deprecation in
v9.0.0 from puppetlabs-stdlib.

This also adds the type enforcement about purge_config which accepts
only boolean values.

Change-Id: I243572f19564a18003c3de66c1248f0f215bae65"
openstack/puppet-openstack-cookiecutter,puppet-{{cookiecutter.project_name}}/manifests/deps.pp,"Add per module policy service refresh

Updating the policies for this project should only
refresh the services that reads it.

Change-Id: I18418bb01da896f0e12aead11c28b24c0e103c62"
openstack/puppet-openstack-cookiecutter,puppet-{{cookiecutter.project_name}}/manifests/policy.pp,"Add per module policy service refresh

Updating the policies for this project should only
refresh the services that reads it.

Change-Id: I18418bb01da896f0e12aead11c28b24c0e103c62"
openstack/puppet-openstack-cookiecutter,puppet-{{cookiecutter.project_name}}/manifests/db/sync.pp,"Merge ""Avoid hard-coding OS user in each manifests"""
openstack/puppet-openstack-cookiecutter,puppet-{{cookiecutter.project_name}}/manifests/params.pp,"Merge ""Avoid hard-coding OS user in each manifests"""
openstack/puppet-openstack-cookiecutter,puppet-{{cookiecutter.project_name}}/manifests/db/sync.pp,"Avoid hard-coding OS user in each manifests

... but define it ::params as is done for group.

Change-Id: If343a8d89c7675a969e0a16ad9903cd4051ce750"
openstack/puppet-openstack-cookiecutter,puppet-{{cookiecutter.project_name}}/manifests/params.pp,"Avoid hard-coding OS user in each manifests

... but define it ::params as is done for group.

Change-Id: If343a8d89c7675a969e0a16ad9903cd4051ce750"
openstack/puppet-openstack-cookiecutter,puppet-{{cookiecutter.project_name}}/manifests/db.pp,"Replace legacy facts and use fact hash

... because the latest lint no longer allows usage of legacy facts and
top scope fact.

Change-Id: I54ecd455a380fcba65132bfc9723b6a1b6c7591e"
openstack/puppet-openstack-cookiecutter,puppet-{{cookiecutter.project_name}}/manifests/keystone/authtoken.pp,"Replace legacy facts and use fact hash

... because the latest lint no longer allows usage of legacy facts and
top scope fact.

Change-Id: I54ecd455a380fcba65132bfc9723b6a1b6c7591e"
openstack/puppet-openstack-cookiecutter,puppet-{{cookiecutter.project_name}}/manifests/logging.pp,"Replace legacy facts and use fact hash

... because the latest lint no longer allows usage of legacy facts and
top scope fact.

Change-Id: I54ecd455a380fcba65132bfc9723b6a1b6c7591e"
openstack/puppet-openstack-cookiecutter,puppet-{{cookiecutter.project_name}}/manifests/params.pp,"Replace legacy facts and use fact hash

... because the latest lint no longer allows usage of legacy facts and
top scope fact.

Change-Id: I54ecd455a380fcba65132bfc9723b6a1b6c7591e"
openstack/puppet-openstack-cookiecutter,puppet-{{cookiecutter.project_name}}/manifests/policy.pp,"Replace legacy facts and use fact hash

... because the latest lint no longer allows usage of legacy facts and
top scope fact.

Change-Id: I54ecd455a380fcba65132bfc9723b6a1b6c7591e"
openstack/puppet-openstack-cookiecutter,puppet-{{cookiecutter.project_name}}/manifests/policy.pp,"Expose policy_default_rule

The option has been managed by the underlying puppet-oslo module but
has not been configurable. This introduces the parameter to customize
the option.

Change-Id: Idcd4b7afac385757702577f7eb5e73e7a460fe86"
openstack/puppet-openstack-cookiecutter,puppet-{{cookiecutter.project_name}}/manifests/deps.pp,"Merge ""Fix dependencies related to openstacklib::policy"""
openstack/puppet-openstack-cookiecutter,puppet-{{cookiecutter.project_name}}/manifests/deps.pp,"Fix dependencies related to openstacklib::policy

Since [1] was merged, not only openstacklib::poliy::base but also
openstacklib::policy::default is included to manage the policy file.
This change ensure openstacklib::policy::default is executed after
the packages are installed.

[1] 740d1bb822e8543535a2fccb4f2eab4b5809422c

Change-Id: Ia100cbf628590218dfa4afa051b0fa8acd024a5a"
openstack/puppet-openstack-cookiecutter,puppet-{{cookiecutter.project_name}}/manifests/keystone/auth.pp,"Simplify definition to ensure keystone resource creation

Use the whole resource type instead of its individual resources, to
rely on interface instead of implementation of the dependent module.

Change-Id: I00b501ff5a9e0411445c253febb7f60f31f8babf"
openstack/puppet-openstack-cookiecutter,puppet-{{cookiecutter.project_name}}/manifests/keystone/auth.pp,"Allow customizing project/system roles

Change-Id: Id3b65ff4dcc973b74298ea91f9da7cbafa0f5da7"
openstack/puppet-openstack-cookiecutter,puppet-{{cookiecutter.project_name}}/manifests/keystone/auth.pp,"Merge ""Use consistent service description"""
openstack/puppet-zaqar,manifests/logging.pp,"logging: Deprecate watch_log_file

This option was deprecated in oslo.log 6.0.0 [1]. Because the warning
to catch usage of the parameter is implemented in the underlying
oslo::log defined resource type, no additional warning message is
implemented in this module.

[1] https://review.opendev.org/914788

Depends-on: https://review.opendev.org/930126
Change-Id: I3630f8773977c388c227378b28323be920b78b6a"
openstack/puppet-zaqar,manifests/management/redis.pp,"Merge ""Ensure python-redis is install"""
openstack/puppet-zaqar,manifests/messaging/redis.pp,"Merge ""Ensure python-redis is install"""
openstack/puppet-zaqar,manifests/params.pp,"Merge ""Ensure python-redis is install"""
openstack/puppet-zaqar,manifests/management/redis.pp,"Ensure python-redis is install

The python-redis package is an optional dependency and needs to be
installed explicitly in Ubuntu or Debian. (The zaqar package in RDO
has additonal dependency to require python-redis now).

Change-Id: I5c768a4ed60909f2e764ed6a39c372814b50c58b"
openstack/puppet-zaqar,manifests/messaging/redis.pp,"Ensure python-redis is install

The python-redis package is an optional dependency and needs to be
installed explicitly in Ubuntu or Debian. (The zaqar package in RDO
has additonal dependency to require python-redis now).

Change-Id: I5c768a4ed60909f2e764ed6a39c372814b50c58b"
openstack/puppet-zaqar,manifests/params.pp,"Ensure python-redis is install

The python-redis package is an optional dependency and needs to be
installed explicitly in Ubuntu or Debian. (The zaqar package in RDO
has additonal dependency to require python-redis now).

Change-Id: I5c768a4ed60909f2e764ed6a39c372814b50c58b"
openstack/puppet-zaqar,manifests/cache.pp,"cache: Support new redis options

The oslo.cache 3.7.0 release introduced some options for redis backend
and redis sentinel backend. This introduces support for these
parameters.

Depneds-on: https://review.opendev.org/910629
Change-Id: I88b6b3c41b6f8691720b6bf9ccd5999d7a24f68c"
openstack/puppet-zaqar,manifests/cache.pp,"Refactor resource dependencies

This refactors resource dependencies to avoid unnecessary dependencies
across services. For example zaqar service does not require cinder db.

Change-Id: I8b2c64ab4896c6fbb407eaa58e99056da3b5170c"
openstack/puppet-zaqar,manifests/deps.pp,"Refactor resource dependencies

This refactors resource dependencies to avoid unnecessary dependencies
across services. For example zaqar service does not require cinder db.

Change-Id: I8b2c64ab4896c6fbb407eaa58e99056da3b5170c"
openstack/puppet-zaqar,manifests/keystone/authtoken.pp,"Refactor resource dependencies

This refactors resource dependencies to avoid unnecessary dependencies
across services. For example zaqar service does not require cinder db.

Change-Id: I8b2c64ab4896c6fbb407eaa58e99056da3b5170c"
openstack/puppet-zaqar,manifests/management/sqlalchemy.pp,"Refactor resource dependencies

This refactors resource dependencies to avoid unnecessary dependencies
across services. For example zaqar service does not require cinder db.

Change-Id: I8b2c64ab4896c6fbb407eaa58e99056da3b5170c"
openstack/puppet-zaqar,manifests/policy.pp,"Refactor resource dependencies

This refactors resource dependencies to avoid unnecessary dependencies
across services. For example zaqar service does not require cinder db.

Change-Id: I8b2c64ab4896c6fbb407eaa58e99056da3b5170c"
openstack/puppet-zaqar,manifests/cache.pp,"cache: Support options for SASL mechanism in memcached

Depends-on: https://review.opendev.org/910122
Change-Id: I41e1d14bf21139c590cc241c63f45dec7d022df6"
openstack/puppet-zaqar,manifests/cache.pp,"Add HashClient retry options for the dogpile.cache backend

This patch specifies a set of options required to setup the HashClient
retry feature of dogpile.cache cache backend.

Original oslo.cache change:
https://review.opendev.org/c/openstack/oslo.cache/+/824944

Co-Authored-By: Herv Beraud <hberaud@redhat.com>
Depends-On: https://review.opendev.org/826870
Change-Id: Iefecbae22a80e5218b43067536378beff72badbb"
openstack/puppet-zaqar,manifests/cache.pp,"Add cache client retry options for the pymemcache backend

This patch specifies a set of options required to setup the retrying
wrapper feature of pymemcache (dogpile.cache) cache backend.

Original oslo.cache change:
https://review.opendev.org/c/openstack/oslo.cache/+/803747

Co-Authored-By: Herv Beraud <hberaud@redhat.com>
Depends-On: https://review.opendev.org/826869
Change-Id: Ia0fa98ff49d63332eff8e4e377402d2527b1c595"
openstack/puppet-zaqar,manifests/reports.pp,"Add support for oslo.reports options

Depends-on: https://review.opendev.org/804804
Change-Id: I2216ae2256a9898bc663157698445022382b4ff5"
openstack/puppet-zaqar,manifests/messaging/swift.pp,"swift: Improve parameter support coverage

Change-Id: I017808988071f4cd52186bc1529d07958867a5fe"
openstack/puppet-zaqar,manifests/keystone/trust.pp,"Make password required

... because it is actually required so that zaqar can authenticate with
keystone.

Depends-on: https://review.opendev.org/903852
Change-Id: I8e5ea733f10abfdcc5da0699311222cfbe6cbf4e"
openstack/puppet-zaqar,manifests/cache.pp,"Support [cache] memcache_pool_flush_on_reconnect

Depends-on: https://review.opendev.org/902861
Change-Id: Ic5e40835abb923d2e9f2243e7b8f7241ab924670"
openstack/puppet-zaqar,manifests/management/sqlalchemy.pp,"Merge ""sqlalchemy: Ensure backend package is installed"""
openstack/puppet-zaqar,manifests/init.pp,"Merge ""Do not hard-code default stores"""
openstack/puppet-zaqar,manifests/management/sqlalchemy.pp,"sqlalchemy: Ensure backend package is installed

Some of the backends supported by sqlalchemy (eg mysql + pymysql)
require additional packages. This ensures the required packages are
installed using the oslo::db defined type.

Change-Id: I7fc4cea95a0a7ecba7def9db4f01c16ef1cfa2f3"
openstack/puppet-zaqar,manifests/init.pp,"Do not hard-code default stores

... as is described in the parameter descriptions.

Change-Id: Iabdf90bf6cf4cede7fe705032d5a65dabc69b8e2"
openstack/puppet-openstack-integration,manifests/tempest.pp,"Hard-code service type for cinder

Tempest recently changed the default [volume] catalog_type to use
official name[1]. Hard-code the old value until we establish
the solution to adopt to the change.

[1] https://review.opendev.org/c/openstack/tempest/+/930296

Change-Id: I0ee92d93e065b829faa5871e5a4d92794c9b3f8e"
openstack/puppet-openstack-integration,manifests/tempest.pp,"tempest: Drop deprecated auth_version

Change-Id: Idd4bcb9a5d8365449ffc4f794195122acf64a4bb"
openstack/puppet-openstack-integration,fixtures/scenario005.pp,"Merge ""Test deployment with VPNaaS + ml2 ovn driver"""
openstack/puppet-openstack-integration,manifests/neutron.pp,"Merge ""Test deployment with VPNaaS + ml2 ovn driver"""
openstack/puppet-openstack-integration,manifests/neutron.pp,"Merge ""neutron: Use dedicate class to manage dr service plugin"""
openstack/puppet-openstack-integration,manifests/neutron.pp,"neutron: Use dedicate class to manage dr service plugin

Depends-on: https://review.opendev.org/930101
Change-Id: I8eaf7b67adb62d8842c5ef1f5e9357774396abc0"
openstack/puppet-openstack-integration,fixtures/scenario005.pp,"Test deployment with VPNaaS + ml2 ovn driver

The neutron-vpnaas plugin supports deployment with ml2 + ovs since
2024.1 . Enable the plugin and its agent to test the new capability
to deploy the plugin.

Depends-on: https://review.opendev.org/930070
Change-Id: I7c79ba34d5a39639bffdc9278a8455e8eec10bbf"
openstack/puppet-openstack-integration,manifests/neutron.pp,"Test deployment with VPNaaS + ml2 ovn driver

The neutron-vpnaas plugin supports deployment with ml2 + ovs since
2024.1 . Enable the plugin and its agent to test the new capability
to deploy the plugin.

Depends-on: https://review.opendev.org/930070
Change-Id: I7c79ba34d5a39639bffdc9278a8455e8eec10bbf"
openstack/puppet-openstack-integration,fixtures/scenario004.pp,"Merge ""Fix inconsistent deployment architecture switch"""
openstack/puppet-openstack-integration,fixtures/scenario004.pp,"Fix inconsistent deployment architecture switch

Only scenario 004 used 'Ubuntu or not' while the other scenarios use
'Debian family or not'.

Change-Id: I6f9d1181c9e51ea97129f12ee36bbfa9f0cde189"
openstack/puppet-openstack-integration,fixtures/scenario001.pp,"Merge ""Revert ""Disable Vitrage in Scenario001"""""
openstack/puppet-openstack-integration,fixtures/scenario001.pp,"Revert ""Disable Vitrage in Scenario001""

This reverts commit 96d855444e13ede06e9f1535c371f089d44a1cc4.

Reason for revert:
The issue caused by oslo.db bump was fixed by [1].

[1] d6b5247dbb1acedd43b3dc8e7b1cac06519467c4

Change-Id: I32a2fd6ae9c4498fdfeb53d2b40f7dbcdf839158"
openstack/puppet-openstack-integration,manifests/gnocchi.pp,"gnocchi: Use sentinel for redis incoming driver in CentOS

Gnocchi 4.6.3 now fully supports usage of redis sentinel as incoming
backend.

Change-Id: I385701c4a219d1f86307f7d13af327a21a19d601"
openstack/puppet-openstack-integration,manifests/params.pp,"Drop usage of 'update-ca-trust force-enable'

... because the subcommand does not exist actually. The command fails
with the following error in recent CentOS Stream 9.

```
Error: Unknown command: force-enable

Usage: /usr/bin/update-ca-trust [extract] [-o DIR|--output=DIR]

Update the system trust store in /etc/pki/ca-trust/extracted.

COMMANDS
(absent/empty command): Same as the extract command described below.

extract: Instruct update-ca-trust to scan the source configuration in
/usr/share/pki/ca-trust-source and /etc/pki/ca-trust/source and produce
updated versions of the consolidated configuration files stored below
the /etc/pki/ca-trust/extracted directory hierarchy.

EXTRACT OPTIONS
-o DIR, --output=DIR: Write the extracted trust store into the given
directory instead of updating /etc/pki/ca-trust/extracted.
```

Change-Id: I38bbfc08a73823d2fd6e00974e277130cbff7e12"
openstack/puppet-openstack-integration,fixtures/scenario003.pp,"Merge ""Enable designate dashboard"""
openstack/puppet-openstack-integration,manifests/horizon.pp,"Merge ""Enable designate dashboard"""
openstack/puppet-openstack-integration,fixtures/scenario003.pp,"Enable designate dashboard

Enable designate dashboard in scenario 003 which has the designate
service deployed.

Change-Id: I420e732749488ba62df5869e9ab95003f2a79b42"
openstack/puppet-openstack-integration,manifests/horizon.pp,"Enable designate dashboard

Enable designate dashboard in scenario 003 which has the designate
service deployed.

Change-Id: I420e732749488ba62df5869e9ab95003f2a79b42"
openstack/puppet-openstack-integration,manifests/rabbitmq.pp,"rabbitmq: Create ssl certificate directory after package installation

... and remove the redundant dual resource dependencies.

Change-Id: I83b650955d422a940b0dcb5d193bdceb6aeac6d3"
openstack/puppet-openstack-integration,fixtures/scenario001.pp,"Merge ""Fix incomplete setting to enable in-storage image data copy"""
openstack/puppet-openstack-integration,fixtures/scenario004.pp,"Merge ""Fix incomplete setting to enable in-storage image data copy"""
openstack/puppet-openstack-integration,fixtures/scenario005.pp,"Merge ""Fix incomplete setting to enable in-storage image data copy"""
openstack/puppet-openstack-integration,manifests/cinder.pp,"Merge ""Fix incomplete setting to enable in-storage image data copy"""
openstack/puppet-openstack-integration,manifests/glance.pp,"Merge ""Fix incomplete setting to enable in-storage image data copy"""
openstack/puppet-mistral,manifests/init.pp,"Add support for [oslo_messaging_rabbit] enable_cancel_on_failover

Depends-on: https://review.opendev.org/928440
Change-Id: Ib6a3e185c22f829386822209022e85508185316e"
openstack/puppet-mistral,manifests/logging.pp,"Merge ""logging: Deprecate watch_log_file"""
openstack/puppet-mistral,manifests/logging.pp,"logging: Deprecate watch_log_file

This option was deprecated in oslo.log 6.0.0 [1]. Because the warning
to catch usage of the parameter is implemented in the underlying
oslo::log defined resource type, no additional warning message is
implemented in this module.

[1] https://review.opendev.org/914788

Depends-on: https://review.opendev.org/930126
Change-Id: Iaac7eb670c3dd8c448602f06577fdb50c5182827"
openstack/puppet-mistral,manifests/init.pp,"Merge ""Expose rabbit_qos_prefetch_count"""
openstack/puppet-mistral,manifests/init.pp,"Expose rabbit_qos_prefetch_count

The option was supported by puppet-oslo but was not configurable via
this module.

Change-Id: I2d3dd1249832b4fc528004ef1268a4fc1c5e1878"
openstack/puppet-mistral,manifests/keystone/auth.pp,"Add validations for keystone resource parameters

The underlying implementation already have type validations. Inherit
these and make a few adjustment so that validation failures are raised
from the external interface layer instead of the internal interface.

Change-Id: Ia121d07235a2d6a55b3a6c45232bca802c811d72"
openstack/puppet-mistral,manifests/healthcheck.pp,"Add support for [healthcheck] enable_by_file_paths

Depends-on: https://review.opendev.org/923648
Change-Id: I964ac7cc60c0a83dc800cde1e67b524cd64f2023"
openstack/puppet-mistral,manifests/coordination.pp,"Merge ""coordination: Remove heartbeat_interval"""
openstack/puppet-mistral,manifests/coordination.pp,"coordination: Remove heartbeat_interval

This parameter was deprecated during the previous cycle[1].

[1] c7fa10285d33e9a6721773faf74e3e2d5c586031

Change-Id: Ib253453b39ae7ac68b6e85db8b262cd201413a5c"
openstack/puppet-mistral,manifests/coordination.pp,"Deprecate support for [coordination] heartbeat_interval

This option hasn't been unused by Mistral and was formally deprecated
during this cycle.

Depends-on: https://review.opendev.org/877936
Change-Id: If6aa337cdd0f932b0cf0aaee14aa04bd36701076"
openstack/puppet-mistral,manifests/params.pp,"Merge ""Revert ""Fix wrong wsgi script path"""""
openstack/puppet-mistral,manifests/params.pp,"Revert ""Fix wrong wsgi script path""

This reverts commit 8588e30b3953f377ca5700fa8641824df7166f9c.

Reason for revert:
The wsgi script generated by setuptools was restored by [1].

[1] https://review.opendev.org/c/openstack/mistral/+/912085

Change-Id: Iaccdd9db4c9ae8a9ed59bbf782ddd8f39a90a1bc"
openstack/puppet-mistral,manifests/init.pp,"Merge ""Expose rabbit_transient_quorum_queue"""
openstack/puppet-mistral,manifests/init.pp,"Expose rabbit_transient_quorum_queue

Depends-on: https://review.opendev.org/911021
Change-Id: Ifa8f02117e70c46bb2140e2e4f9196c110a556a0"
openstack/puppet-mistral,manifests/coordination.pp,"Refactor resource dependencies

This refactors resource dependencies to avoid unnecessary dependencies
across services. For example zaqar service does not require cinder db.

Change-Id: I46c28803dd2eb0e88a25d165c768f61f565fd8e6"
openstack/puppet-mistral,manifests/db.pp,"Refactor resource dependencies

This refactors resource dependencies to avoid unnecessary dependencies
across services. For example zaqar service does not require cinder db.

Change-Id: I46c28803dd2eb0e88a25d165c768f61f565fd8e6"
openstack/puppet-mistral,manifests/deps.pp,"Refactor resource dependencies

This refactors resource dependencies to avoid unnecessary dependencies
across services. For example zaqar service does not require cinder db.

Change-Id: I46c28803dd2eb0e88a25d165c768f61f565fd8e6"
openstack/puppet-mistral,manifests/keystone/authtoken.pp,"Refactor resource dependencies

This refactors resource dependencies to avoid unnecessary dependencies
across services. For example zaqar service does not require cinder db.

Change-Id: I46c28803dd2eb0e88a25d165c768f61f565fd8e6"
openstack/puppet-mistral,manifests/policy.pp,"Refactor resource dependencies

This refactors resource dependencies to avoid unnecessary dependencies
across services. For example zaqar service does not require cinder db.

Change-Id: I46c28803dd2eb0e88a25d165c768f61f565fd8e6"
openstack/puppet-mistral,manifests/params.pp,"Stop hard-coding config file for db sync

The mistral-db-manage command by default loads
/etc/mistral/mistral.conf. Removing the override allows us to use
additional paths such as mistral.conf.d in the future.

Change-Id: Ia7e988df093e16dd6ad53ce2d2f8e6b340daf887"
openstack/puppet-mistral,manifests/healthcheck.pp,"healthcheck: Expose ignore_proxied_requests parameter

Depends-on: https://review.opendev.org/909807
Change-Id: Iccfc9100684e07d25750a95e238b73de9f70ccf3"
openstack/puppet-mistral,manifests/healthcheck.pp,"healthcheck: Expose allowed_source_ranges

... which was added to puppet-oslo recently.

Depends-on: https://review.opendev.org/905557
Change-Id: Ie589f60a70768bb3e08b1df916215c25be9e59d9"
openstack/puppet-mistral,manifests/keystone/authtoken.pp,"Merge ""authtoken: Make password required"""
openstack/puppet-mistral,manifests/keystone/authtoken.pp,"authtoken: Make password required

The password parameter is not really optional. This makes it
a required parameter to give more sensible validation error.

Change-Id: I4b770f07a249fadd44d8bafc15219f4503d10778"
openstack/puppet-mistral,manifests/healthcheck.pp,"Add support for healthcheck middleware options

Depends-on: https://review.opendev.org/772202
Depends-on: https://review.opendev.org/800405
Change-Id: I7b20aa48cb16927211a862e264bb51ae4bb50f42"
openstack/puppet-aodh,manifests/init.pp,"Merge ""Rename parameters for queue manager options"""
openstack/puppet-aodh,manifests/init.pp,"Expose parameter to customize [oslo_messaging_notifications] retry

The parameter has been managed by puppet-oslo, but its value could not
be set via this module.

Change-Id: I551ed39a3819c171af8f9242f774dcf80d5b90a3"
openstack/puppet-aodh,manifests/init.pp,"Rename parameters for queue manager options

... to avoid potential collisions with default options.

Change-Id: I16fd48aaa5ec5a693a510ee1598923f6c5129d71"
openstack/puppet-aodh,manifests/init.pp,"Rename enable_cancel_on_failover parameter

... so that users can more easily guess that the parameter is related
to rabbitmq.

Change-Id: Ic980e04d1fbfb3026b1fda271c249bb3256a24fd"
openstack/puppet-aodh,manifests/logging.pp,"logging: Deprecate watch_log_file

This option was deprecated in oslo.log 6.0.0 [1]. Because the warning
to catch usage of the parameter is implemented in the underlying
oslo::log defined resource type, no additional warning message is
implemented in this module.

[1] https://review.opendev.org/914788

Depends-on: https://review.opendev.org/930126
Change-Id: I60d5277e33e55132d22a6af9ce18f45e84487818"
openstack/puppet-aodh,manifests/keystone/auth.pp,"Expose configure_service

This parameter has been implemented in the underlying defined resource
type but was not configurable.

Change-Id: I0014f93d580eb7ae81b29aedc0ec51a62ea3eb55"
openstack/puppet-aodh,manifests/init.pp,"Merge ""Expose rabbit_qos_prefetch_count"""
openstack/puppet-aodh,manifests/init.pp,"Expose rabbit_qos_prefetch_count

The option was supported by puppet-oslo but was not configurable via
this module.

Change-Id: Ic20932c66706a55923b7c2f01d714be017f20537"
openstack/puppet-aodh,manifests/init.pp,"Add support for [oslo_messaging_rabbit] rabbit_stream_fanout

Depends-on: https://review.opendev.org/928497
Change-Id: I831108b202998dc02658c4b1ec2ef6e300516627"
openstack/puppet-aodh,manifests/init.pp,"rabbitmq: Support queue manager options

Add support to manage options for queue manager feature.

Depends-on: https://review.opendev.org/928496
Change-Id: I5d35ceab21bed548649bbfcb9b8d5b50640c0347"
openstack/puppet-aodh,manifests/init.pp,"Add support for [oslo_messaging_rabbit] enable_cancel_on_failover

Depends-on: https://review.opendev.org/928440
Change-Id: Iaf297c332269f6247b6f698aa9e82c4f5b303db0"
openstack/puppet-aodh,manifests/healthcheck.pp,"Add support for [healthcheck] enable_by_file_paths

Depends-on: https://review.opendev.org/923648
Change-Id: Ib84c504c1634c9f965539247b5f5516e39f45620"
openstack/puppet-aodh,manifests/keystone/auth.pp,"Merge ""Add validations for keystone resource parameters"""
openstack/puppet-aodh,manifests/keystone/auth.pp,"Add validations for keystone resource parameters

The underlying implementation already have type validations. Inherit
these and make a few adjustment so that validation failures are raised
from the external interface layer instead of the internal interface.

Change-Id: Iefbdb1483986ad734ebce03d96c762eba4639067"
openstack/puppet-aodh,manifests/init.pp,"Remove support for amqp1 messaging driver

The base implementation in puppet-oslo was deprecated during the 2023.2
cycle[1], so can be removed now.

[1] e174113210699b433dbae4c2c5a68bc3d269b5c3

Change-Id: I56fcea28e8fc3500fa10733ed60dfc7b016d1869"
openstack/puppet-aodh,manifests/expirer.pp,"validate maxdelay for cron job

The parameter descriptions says the value should be a positive integer
(or 0). Validate the given value to reject invalid values such as
strings or even negative values.

Change-Id: Ib9f90c88f564ac5a0d545f955257741290998a5e"
openstack/puppet-aodh,manifests/init.pp,"Merge ""Expose rabbit_transient_quorum_queue"""
openstack/puppet-aodh,manifests/init.pp,"Expose rabbit_transient_quorum_queue

Depends-on: https://review.opendev.org/911021
Change-Id: I363931363160fb4a51307e1c789a776563ec0cd8"
openstack/puppet-aodh,manifests/db/sync.pp,"Stop hard-coding config file for db sync

The aodh-dbsync command by default loads /etc/aodh/aodh.conf. Removing
the override allows us to use additional paths such as aodh.conf.d in
the future.

Change-Id: Ic3bf121611d7221209c006872ab98b0682aa2273"
openstack/puppet-aodh,manifests/healthcheck.pp,"healthcheck: Expose ignore_proxied_requests parameter

Depends-on: https://review.opendev.org/909807
Change-Id: Ifb42750a7767579bb31f79a68f4042c8f6e8caa1"
openstack/puppet-barbican,manifests/api.pp,"Merge ""Expose parameter to customize [oslo_messaging_notifications] retry"""
openstack/puppet-barbican,manifests/api.pp,"Expose parameter to customize [oslo_messaging_notifications] retry

The parameter has been managed by puppet-oslo, but its value could not
be set via this module.

Change-Id: I73ac576f7600b3e5e36673f3f591b4d67fdc84ed"
openstack/puppet-barbican,manifests/api.pp,"Add support for [oslo_messaging_rabbit] enable_cancel_on_failover

Depends-on: https://review.opendev.org/928440
Change-Id: Ie4ff86a1284548d591cb7d190bafc71a18a5ebdb"
openstack/puppet-barbican,manifests/api/logging.pp,"Merge ""logging: Deprecate watch_log_file"""
openstack/puppet-barbican,manifests/api/logging.pp,"logging: Deprecate watch_log_file

This option was deprecated in oslo.log 6.0.0 [1]. Because the warning
to catch usage of the parameter is implemented in the underlying
oslo::log defined resource type, no additional warning message is
implemented in this module.

[1] https://review.opendev.org/914788

Depends-on: https://review.opendev.org/930126
Change-Id: Ia9e9ddb8bb3e4e5c42f394b7aaaec12cfd5dd13e"
openstack/puppet-barbican,manifests/api.pp,"Merge ""Expose rabbit_qos_prefetch_count"""
openstack/puppet-barbican,manifests/api.pp,"Expose rabbit_qos_prefetch_count

The option was supported by puppet-oslo but was not configurable via
this module.

Change-Id: Ie46b178c847e33688a87d07093eb939af1403c66"
openstack/puppet-barbican,manifests/keystone/auth.pp,"Expose configure_service

This parameter has been implemented in the underlying defined resource
type but was not configurable.

Change-Id: I7a6f84b986a4e8864d582ee6b24bbe6203addba3"
openstack/puppet-barbican,manifests/keystone/auth.pp,"Use common format for service description

Use the ""OpenStack * Service"" format which is more commonly used in our
modules. Also 'Key Manager' is the word actually described in Barbican
documentation, instead of 'Key Management'.

Change-Id: I745a9ee6b05b471ab6f95186b7d5c3f52d0d5a87"
openstack/puppet-barbican,manifests/keystone/auth.pp,"Add validations for keystone resource parameters

The underlying implementation already have type validations. Inherit
these and make a few adjustment so that validation failures are raised
from the external interface layer instead of the internal interface.

Change-Id: I528d35c3b0b71766947bf998d2088679da51634a"
openstack/puppet-barbican,manifests/db.pp,"Merge ""Remove old note about database options"""
openstack/puppet-barbican,manifests/healthcheck.pp,"Add support for [healthcheck] enable_by_file_paths

Depends-on: https://review.opendev.org/923648
Change-Id: I992747a139d11853be20c69ea2368e37b082dd6c"
openstack/puppet-barbican,manifests/api.pp,"Merge ""Remove parameters for certificate plugins"""
openstack/puppet-barbican,manifests/plugins/dogtag.pp,"Merge ""Remove parameters for certificate plugins"""
openstack/puppet-barbican,manifests/db.pp,"Remove old note about database options

Now barbican uses oslo.db to manage database connections so these notes
are no longer valid.

Depends-on: https://review.opendev.org/915520
Change-Id: I36e2e33514b02e31c0f85935f76f13d8481f0150"
openstack/puppet-barbican,manifests/db.pp,"Remove purge of old database options

These purge resources were added during 2024.1 cycle, so the options
should be removed when a deployment is upgraded to 2024.1.

Change-Id: I60efaf20a68af4682b0bac922c1b034e7b3c85e2"
openstack/puppet-barbican,manifests/api.pp,"Remove parameters for certificate plugins

Certificate plugins were removed from barbican during 2024.1 cycle[1]
and we deprecated these parameters during the same cycle[2], so we can
remove these now.

[1] 9833751613c6a552025f50a5dcd280dc6391ec32
[2] d2625af949e7ac65174b7158afc1bfab532a925e

Depends-on: https://review.opendev.org/916324
Change-Id: I321b4c2dd70664e5a45c97d1e605283e042f97f9"
openstack/puppet-barbican,manifests/plugins/dogtag.pp,"Remove parameters for certificate plugins

Certificate plugins were removed from barbican during 2024.1 cycle[1]
and we deprecated these parameters during the same cycle[2], so we can
remove these now.

[1] 9833751613c6a552025f50a5dcd280dc6391ec32
[2] d2625af949e7ac65174b7158afc1bfab532a925e

Depends-on: https://review.opendev.org/916324
Change-Id: I321b4c2dd70664e5a45c97d1e605283e042f97f9"
openstack/puppet-barbican,manifests/db.pp,"Drop barbican-specific database options

These options were renamed and now barbican uses the consistent options.

Depends-on: https://review.opendev.org/c/openstack/barbican/+/848011
Change-Id: Icd79dafba400b55d023387da3ae704a6186cefa2"
openstack/puppet-barbican,manifests/plugins/p11_crypto.pp,"[p11_crypto_plugin] login should be secret

... because the option accepts password to login to PKCS11 session.

Change-Id: Ide5ffb33aa8ac640f7a3b552d577d4c820565402"
openstack/puppet-barbican,manifests/api.pp,"Expose rabbit_transient_quorum_queue

Depends-on: https://review.opendev.org/911021
Change-Id: Icdc456fb132d74037dff7ce5c502994103061258"
openstack/puppet-barbican,manifests/api.pp,"Deprecate parameters for certificate plugins

... because certificate plugins were deprecated some time ago in
Barbican and are being removed in this cycle.

Depends-on: https://review.opendev.org/c/openstack/barbican/+/909640
Change-Id: Ie2dacb037a3d5ba8f1732ddb8f4b8ea8ded1e5ed"
openstack/puppet-barbican,manifests/plugins/dogtag.pp,"Deprecate parameters for certificate plugins

... because certificate plugins were deprecated some time ago in
Barbican and are being removed in this cycle.

Depends-on: https://review.opendev.org/c/openstack/barbican/+/909640
Change-Id: Ie2dacb037a3d5ba8f1732ddb8f4b8ea8ded1e5ed"
openstack/puppet-barbican,manifests/api.pp,"Merge ""Refactor resource dependencies"""
openstack/puppet-barbican,manifests/db.pp,"Merge ""Refactor resource dependencies"""
openstack/puppet-barbican,manifests/deps.pp,"Merge ""Refactor resource dependencies"""
openstack/puppet-barbican,manifests/keystone/authtoken.pp,"Merge ""Refactor resource dependencies"""
openstack/puppet-barbican,manifests/policy.pp,"Merge ""Refactor resource dependencies"""
openstack/puppet-barbican,manifests/worker.pp,"Support [queue] asynchronous_workers option

... which determines number of processes launched in barbican-worker.

Change-Id: Ia31a7d440ba3102afa7b5972fe893cfb4f1817a1"
openstack/puppet-magnum,manifests/capi_helm.pp,"Use Stdlib::Filemode to validate file mode

Change-Id: Ifb6f2b94df7e3ae8b4633c3a4655dc2b5f60fde8"
openstack/puppet-magnum,manifests/init.pp,"Expose parameter to customize [oslo_messaging_notifications] retry

The parameter has been managed by puppet-oslo, but its value could not
be set via this module.

Change-Id: I16c316300cfda5fd14513837e325176507fd4ba3"
openstack/puppet-magnum,manifests/init.pp,"Add support for [oslo_messaging_rabbit] enable_cancel_on_failover

Depends-on: https://review.opendev.org/928440
Change-Id: I9d3bf32a59c9f53aff6be03859b80e0d7098aa0b"
openstack/puppet-magnum,manifests/logging.pp,"logging: Deprecate watch_log_file

This option was deprecated in oslo.log 6.0.0 [1]. Because the warning
to catch usage of the parameter is implemented in the underlying
oslo::log defined resource type, no additional warning message is
implemented in this module.

[1] https://review.opendev.org/914788

Depends-on: https://review.opendev.org/930126
Change-Id: Icec64b2564171e8ca0e93aea9675dc33cc696665"
openstack/puppet-magnum,manifests/init.pp,"Merge ""Expose rabbit_qos_prefetch_count"""
openstack/puppet-magnum,manifests/init.pp,"Expose rabbit_qos_prefetch_count

The option was supported by puppet-oslo but was not configurable via
this module.

Change-Id: I22cb904e9ae47e744dee37b49c3f79214851e916"
openstack/puppet-magnum,manifests/keystone/auth.pp,"Add validations for keystone resource parameters

The underlying implementation already have type validations. Inherit
these and make a few adjustment so that validation failures are raised
from the external interface layer instead of the internal interface.

Change-Id: I543ff581f22728268347c835ea8ba32e1b6d799d"
openstack/puppet-magnum,manifests/capi_helm.pp,"Use user/group definition from params class

... to centralize the default definition.

Change-Id: I7b75fe22f25b8eb66220f47799ec9b7afab2e6c1"
openstack/puppet-magnum,manifests/capi_helm.pp,"Merge ""capi_helm: add all configuration variables as parameters"""
openstack/puppet-magnum,manifests/capi_helm.pp,"capi_helm: add all configuration variables as parameters

Change-Id: Ic14d4c1c8bae05d5d42373a45ae1e0bcb930763c"
openstack/puppet-magnum,manifests/drivers.pp,"add class to handle drivers section

Change-Id: Id93129f3758706d3baa2099e4dec52c068c60c90"
openstack/puppet-magnum,manifests/conductor.pp,"Deprecate conductor_life_check_timeout

This option has been unused, and was removed from magnum.

Depneds-on: https://review.opendev.org/912027
Change-Id: I055ef530f164f80646ab70ac91a10c2f584048e7"
openstack/puppet-magnum,manifests/healthcheck.pp,"Add support for [healthcheck] enable_by_file_paths

Depends-on: https://review.opendev.org/923648
Change-Id: I10747e111cf1c9ba4a880173a58abdaa9619943d"
openstack/puppet-magnum,manifests/init.pp,"Merge ""Remove support for amqp1 messaging driver"""
openstack/puppet-magnum,manifests/init.pp,"Remove support for amqp1 messaging driver

The base implementation in puppet-oslo was deprecated during the 2023.2
cycle[1], so can be removed now.

[1] e174113210699b433dbae4c2c5a68bc3d269b5c3

Change-Id: I99d295323bd2fafb98def98e4bb09b22809692dd"
openstack/puppet-magnum,manifests/certificates.pp,"Merge ""Add support for [certificates] storage_path option"""
openstack/puppet-magnum,manifests/certificates.pp,"Add support for [certificates] storage_path option

... and also add unit test coverage of the certificates class.

Change-Id: Ice02e476895408a9373741b7395f28771e7109ad"
openstack/puppet-magnum,manifests/db/sync.pp,"Remove deprecated exec_path parameter for db sync

This parameter was deprecated in 2024.1 release[1].

[1] f7dfc6abff5ecba44f7f3d38aad21670454e9faf

Change-Id: Ia18fae7d2b8271556d477edf1ef33487c326d9a9"
openstack/puppet-magnum,manifests/api.pp,"Refactor resource dependencies

This refactors resource dependencies to improve the following points.

 - Avoid unnecessary dependencies across services. For example aodh
   service does not require cinder db.

 - Restart only api service when config files like paste.ini, which
   are used only be api service is changed.

Change-Id: I85d05bd9679007f3d0def4d7d345f55d87d0d903"
openstack/puppet-magnum,manifests/db.pp,"Refactor resource dependencies

This refactors resource dependencies to improve the following points.

 - Avoid unnecessary dependencies across services. For example aodh
   service does not require cinder db.

 - Restart only api service when config files like paste.ini, which
   are used only be api service is changed.

Change-Id: I85d05bd9679007f3d0def4d7d345f55d87d0d903"
openstack/puppet-magnum,manifests/deps.pp,"Refactor resource dependencies

This refactors resource dependencies to improve the following points.

 - Avoid unnecessary dependencies across services. For example aodh
   service does not require cinder db.

 - Restart only api service when config files like paste.ini, which
   are used only be api service is changed.

Change-Id: I85d05bd9679007f3d0def4d7d345f55d87d0d903"
openstack/puppet-magnum,manifests/keystone/authtoken.pp,"Refactor resource dependencies

This refactors resource dependencies to improve the following points.

 - Avoid unnecessary dependencies across services. For example aodh
   service does not require cinder db.

 - Restart only api service when config files like paste.ini, which
   are used only be api service is changed.

Change-Id: I85d05bd9679007f3d0def4d7d345f55d87d0d903"
openstack/puppet-magnum,manifests/policy.pp,"Refactor resource dependencies

This refactors resource dependencies to improve the following points.

 - Avoid unnecessary dependencies across services. For example aodh
   service does not require cinder db.

 - Restart only api service when config files like paste.ini, which
   are used only be api service is changed.

Change-Id: I85d05bd9679007f3d0def4d7d345f55d87d0d903"
openstack/puppet-magnum,manifests/clients.pp,"Merge ""Remove redundant override of clients options"""
openstack/puppet-magnum,manifests/clients.pp,"Remove redundant override of clients options

Remove the redundant hard-coded defaults of some of the client options.
The values currently used match the defaults in magnum itself.

Change-Id: I93e9f2bee16020f7dd9176828600567520235237"
openstack/puppet-magnum,manifests/keystone/domain.pp,"Require password for domain admin

... so that users may not use the unsafe default unintentionally.

Change-Id: Ia6f97251a775e7f594918aa65228ffa95b862f24"
openstack/puppet-vitrage,manifests/init.pp,"Add support for [oslo_messaging_rabbit] enable_cancel_on_failover

Depends-on: https://review.opendev.org/928440
Change-Id: Iaaab2ed6a7b4b44642f326863060b7ca5311de24"
openstack/puppet-vitrage,manifests/init.pp,"Merge ""Expose parameter to customize [oslo_messaging_notifications] retry"""
openstack/puppet-vitrage,manifests/init.pp,"Expose parameter to customize [oslo_messaging_notifications] retry

The parameter has been managed by puppet-oslo, but its value could not
be set via this module.

Change-Id: I7a90cdc172cdfff17b36266e96601dbbddef5fd2"
openstack/puppet-vitrage,manifests/init.pp,"Expose rabbit_transient_quorum_queue

Depends-on: https://review.opendev.org/911021
Change-Id: I821ef152519cb8a07e9e3908b5db7eb522c2a61b"
openstack/puppet-vitrage,manifests/init.pp,"RabbitMQ: Add support for quorum queue options

Depends-on: https://review.opendev.org/894866
Change-Id: I0ee9d83729f71c1604b015f35254bdb65ddd4010"
openstack/puppet-vitrage,manifests/logging.pp,"Merge ""logging: Deprecate watch_log_file"""
openstack/puppet-vitrage,manifests/logging.pp,"logging: Deprecate watch_log_file

This option was deprecated in oslo.log 6.0.0 [1]. Because the warning
to catch usage of the parameter is implemented in the underlying
oslo::log defined resource type, no additional warning message is
implemented in this module.

[1] https://review.opendev.org/914788

Depends-on: https://review.opendev.org/930126
Change-Id: Iaf862ec02af367105d906a37c229689f083744ba"
openstack/puppet-vitrage,manifests/keystone/auth.pp,"Add validations for keystone resource parameters

The underlying implementation already have type validations. Inherit
these and make a few adjustment so that validation failures are raised
from the external interface layer instead of the internal interface.

Change-Id: Ie606e23d294676927189ee553f0527106d3ddadb"
openstack/puppet-vitrage,manifests/init.pp,"Merge ""Remove support for amqp1 messaging driver"""
openstack/puppet-vitrage,manifests/init.pp,"Remove support for amqp1 messaging driver

The base implementation in puppet-oslo was deprecated during the 2023.2
cycle[1], so can be removed now.

[1] e174113210699b433dbae4c2c5a68bc3d269b5c3

Change-Id: Ib0104a11066f2047e3095ac8cbee571c531c9a67"
openstack/puppet-vitrage,manifests/deps.pp,"Do not restart services after policy file changes

The oslo.policy library has implementations to detect change in policy
rules and reload the new rules without service restart.

Change-Id: I56382b360b4f4f9950d2e636a8f765b732cf7446"
openstack/puppet-oslo,manifests/service/ssl.pp,"Accept list value for ciphers

The [ssl] ciphers option accepts cipher list. Accept a list value and
format it in openssl cipher list format (one or more string separated
by colons).

Change-Id: Ic3f87023af0577412d29d2047b6ae140053f2c8a"
openstack/puppet-oslo,manifests/service/ssl.pp,"ssl: Reject if only one of cert_file and key_file is set

Both of cert_file and key_file should be set to use SSL feature.

Change-Id: I6fa5353e3af18b97f720f6acb6eaf25a25413942"
openstack/puppet-oslo,manifests/os_brick.pp,"Merge ""Support [os-brick] wait_mpath_device_* options"""
openstack/puppet-oslo,manifests/os_brick.pp,"Support [os-brick] wait_mpath_device_* options

Add support for the tuning options for multipath device I/O which were
added in os-brick 6.9.0[1].

[1] 639f953194cdc07b1e6aff1fc1ca2a7bc9d28536

Change-Id: I38892c1d2c140af6e1df32de4c2e38ea4246eff0"
openstack/puppet-oslo,manifests/log.pp,"log: Correct deprecation warning for watch_log_file

This is follow-up of ec4f21b17c310b047ea537cc041e52c7080335a3 and fix
the deprecation warning message because the parameter still has
effect.

Change-Id: Ifecf36e2d8807933f44e6737a3a1c63ee1f830d0"
openstack/puppet-oslo,manifests/log.pp,"logging: Deprecate watch_log_file

This option was deprecated in oslo.log 6.0.0 [1].

[1] https://review.opendev.org/914788

Change-Id: I9aea6b99a2efee78fb561a6a36d796103d4c755e"
openstack/puppet-oslo,manifests/messaging/rabbit.pp,"Add support for [oslo_messaging_rabbit] rabbit_stream_fanout

Change-Id: I779ae835d29b24605c1651048a46b01c0a2587b2"
openstack/puppet-oslo,manifests/messaging/rabbit.pp,"rabbitmq: Support queue manager options

Change-Id: I83db5307f526b5824e9cf3de2cfbff7abb11d443"
openstack/puppet-oslo,manifests/messaging/rabbit.pp,"Add support for [oslo_messaging_rabbit] enable_cancel_on_failover

Change-Id: I4bb86dddde72abf58359956ffd0ba9cca8281a3d"
openstack/puppet-oslo,manifests/healthcheck.pp,"Merge ""Add support for [healthcheck] enable_by_file_paths"""
openstack/puppet-oslo,manifests/healthcheck.pp,"Add support for [healthcheck] enable_by_file_paths

Depends-on: https://review.opendev.org/920055
Change-Id: Ifba5f5b7346a186031df88f6fc34a8693aa54a94"
openstack/puppet-oslo,manifests/messaging/amqp.pp,"Merge ""Remove support for amqp1 messaging driver"""
openstack/puppet-oslo,manifests/messaging/default.pp,"Merge ""Remove support for amqp1 messaging driver"""
openstack/puppet-oslo,manifests/messaging/notifications.pp,"Merge ""Remove support for amqp1 messaging driver"""
openstack/puppet-oslo,types/transporturl.pp,"Merge ""Remove support for amqp1 messaging driver"""
openstack/puppet-oslo,types/transporturl/fake.pp,"Merge ""Remove support for amqp1 messaging driver"""
openstack/puppet-oslo,types/transporturl/rabbit.pp,"Merge ""Remove support for amqp1 messaging driver"""
openstack/puppet-oslo,manifests/messaging/amqp.pp,"Remove support for amqp1 messaging driver

It was deprecated during the 2023.2 cycle[1], so can be removed now.

Also add validation about transport_url options to reject unsupported
drivers.

[1] e174113210699b433dbae4c2c5a68bc3d269b5c3

Depends-on: https://review.opendev.org/918774
Change-Id: I3c3b17b8109c84cc0cbfb4254cc969cc563265e4"
openstack/puppet-oslo,manifests/messaging/default.pp,"Remove support for amqp1 messaging driver

It was deprecated during the 2023.2 cycle[1], so can be removed now.

Also add validation about transport_url options to reject unsupported
drivers.

[1] e174113210699b433dbae4c2c5a68bc3d269b5c3

Depends-on: https://review.opendev.org/918774
Change-Id: I3c3b17b8109c84cc0cbfb4254cc969cc563265e4"
openstack/puppet-oslo,manifests/messaging/notifications.pp,"Remove support for amqp1 messaging driver

It was deprecated during the 2023.2 cycle[1], so can be removed now.

Also add validation about transport_url options to reject unsupported
drivers.

[1] e174113210699b433dbae4c2c5a68bc3d269b5c3

Depends-on: https://review.opendev.org/918774
Change-Id: I3c3b17b8109c84cc0cbfb4254cc969cc563265e4"
openstack/puppet-oslo,types/transporturl.pp,"Remove support for amqp1 messaging driver

It was deprecated during the 2023.2 cycle[1], so can be removed now.

Also add validation about transport_url options to reject unsupported
drivers.

[1] e174113210699b433dbae4c2c5a68bc3d269b5c3

Depends-on: https://review.opendev.org/918774
Change-Id: I3c3b17b8109c84cc0cbfb4254cc969cc563265e4"
openstack/puppet-oslo,types/transporturl/fake.pp,"Remove support for amqp1 messaging driver

It was deprecated during the 2023.2 cycle[1], so can be removed now.

Also add validation about transport_url options to reject unsupported
drivers.

[1] e174113210699b433dbae4c2c5a68bc3d269b5c3

Depends-on: https://review.opendev.org/918774
Change-Id: I3c3b17b8109c84cc0cbfb4254cc969cc563265e4"
openstack/puppet-oslo,types/transporturl/rabbit.pp,"Remove support for amqp1 messaging driver

It was deprecated during the 2023.2 cycle[1], so can be removed now.

Also add validation about transport_url options to reject unsupported
drivers.

[1] e174113210699b433dbae4c2c5a68bc3d269b5c3

Depends-on: https://review.opendev.org/918774
Change-Id: I3c3b17b8109c84cc0cbfb4254cc969cc563265e4"
openstack/puppet-oslo,manifests/coordination.pp,"coordination: Install python3-kazoo when zookeeper is used

Change-Id: Ic9b7183f95c65f0c4faf2196941ea225e4f500e0"
openstack/puppet-oslo,manifests/params.pp,"coordination: Install python3-kazoo when zookeeper is used

Change-Id: Ic9b7183f95c65f0c4faf2196941ea225e4f500e0"
openstack/puppet-oslo,manifests/messaging/rabbit.pp,"Add support for [oslo_messaging_rabbit] rabbit_transient_quorum_queue

... which is the option added during this cycle.

Change-Id: Ic851ec1cf8cbf85fd00dacf9637f619ed1804068"
openstack/puppet-oslo,manifests/cache.pp,"cache: Support new redis options

The oslo.cache 3.7.0 release introduced some options for redis backend
and redis sentinel backend. This introduces for these parameters.

Change-Id: I0386f2cc97346242549713e9663c48ca2b9444ac"
openstack/puppet-oslo,manifests/cache.pp,"cache: Install backend package for bmemcached/redis backend

The oslo.cache library supports the following backends which require
additional backend packages.
 - dogpile.cache.bmemcached
 - dogpile.cache.redis

This ensures that the required backend packages are installed according
to the selected backend.

Change-Id: Ifaaf9e7a4f0557218adbdd3ff967814d384b4064"
openstack/puppet-oslo,manifests/params.pp,"cache: Install backend package for bmemcached/redis backend

The oslo.cache library supports the following backends which require
additional backend packages.
 - dogpile.cache.bmemcached
 - dogpile.cache.redis

This ensures that the required backend packages are installed according
to the selected backend.

Change-Id: Ifaaf9e7a4f0557218adbdd3ff967814d384b4064"
openstack/puppet-oslo,manifests/cache.pp,"cache: Support options for memcached with SASL enabled

This introduces support for oslo.cache options to use memcached with
SASL enabled.

Change-Id: I2b93a4871de5320fdfcfab8f507c4c47b351d6c2"
openstack/puppet-oslo,manifests/healthcheck.pp,"Merge ""healthcheck: Add support for ignore_proxied_requests"""
openstack/puppet-oslo,manifests/healthcheck.pp,"healthcheck: Add support for ignore_proxied_requests

The new ignore_proxied_requests option was added to the healthcheck
middleware which allows operators to prohibit access to healthcheck
information via load balancers. This introduces a new parameter which
corresponds to this option.

Depends-on: https://review.opendev.org/901215
Change-Id: Iaf9b40db938f998c20d6cea4b19cf09651c46bbf"
openstack/puppet-octavia,manifests/init.pp,"Expose parameter to customize [oslo_messaging_notifications] retry

The parameter has been managed by puppet-oslo, but its value could not
be set via this module.

Change-Id: Iee6a97e665d4a830bad6a572142ed7bb3ec3afd2"
openstack/puppet-octavia,manifests/init.pp,"Add support for [oslo_messaging_rabbit] enable_cancel_on_failover

Depends-on: https://review.opendev.org/928440
Change-Id: I841fa9990903e9bc9e280697c66da1aec1b21297"
openstack/puppet-octavia,manifests/logging.pp,"logging: Deprecate watch_log_file

This option was deprecated in oslo.log 6.0.0 [1]. Because the warning
to catch usage of the parameter is implemented in the underlying
oslo::log defined resource type, no additional warning message is
implemented in this module.

[1] https://review.opendev.org/914788

Depends-on: https://review.opendev.org/930126
Change-Id: If7817cb2452c7560b74c93b1f51823a1b470a893"
openstack/puppet-octavia,manifests/keystone/auth.pp,"Add validations for keystone resource parameters

The underlying implementation already have type validations. Inherit
these and make a few adjustment so that validation failures are raised
from the external interface layer instead of the internal interface.

Change-Id: I821317111c60e1b73e82cf3181398303af5817dd"
openstack/puppet-octavia,manifests/init.pp,"Expose rabbit_qos_prefetch_count

The option was supported by puppet-oslo but was not configurable via
this module.

Change-Id: I2ce3457132ee0f47f272f2f9919febe73f670e17"
openstack/puppet-octavia,manifests/certificates.pp,"Merge ""add possibility to specify certificates from source"""
openstack/puppet-octavia,manifests/task_flow.pp,"Merge ""Support options for authentication and SSL for Redis Sentinel"""
openstack/puppet-octavia,manifests/healthcheck.pp,"Add support for [healthcheck] enable_by_file_paths

Depends-on: https://review.opendev.org/923648
Change-Id: I54f09212ed0e2579c8fb1ced27ca196e42cafff7"
openstack/puppet-octavia,manifests/certificates.pp,"add possibility to specify certificates from source

Currently ca/cert/key content needs to be specified as parameter
content. With this patch they can also be specified as a
source file.

Change-Id: I1336c917cd5f4220334d5b0958c33fc4ca86df70"
openstack/puppet-octavia,manifests/task_flow.pp,"Support options for authentication and SSL for Redis Sentinel

Add support for the new options to enable authentication or SSL for
connections to Redis Sentinel.

Depeneds-on: https://review.opendev.org/912355
Change-Id: Idc997403770c99be654419b4d0d4569e8669c2fb"
openstack/puppet-octavia,manifests/init.pp,"Merge ""Remove support for amqp1 messaging driver"""
openstack/puppet-octavia,manifests/init.pp,"Remove support for amqp1 messaging driver

The base implementation in puppet-oslo was deprecated during the 2023.2
cycle[1], so can be removed now.

[1] e174113210699b433dbae4c2c5a68bc3d269b5c3

Change-Id: I869d2f283097404e3f83b0d64127e7cd1c38b72e"
openstack/puppet-octavia,manifests/controller.pp,"Merge ""heartbeat_key parameter has no default"""
openstack/puppet-octavia,manifests/health_manager.pp,"Merge ""health_manager: Remove deprecated workers parameter"""
openstack/puppet-octavia,manifests/api.pp,"Merge ""api: Remove deprecated provider_drivers"""
openstack/puppet-octavia,manifests/health_manager.pp,"health_manager: Remove deprecated workers parameter

The parameter was deprecated a few cycles ago[1].

[1] cffdaec79590f5bcac54811a0a06261392e854ee

Change-Id: I0f5927162c8bc06a52629cf2e5f9d515e5e0f053"
openstack/puppet-octavia,manifests/api.pp,"api: Remove deprecated provider_drivers

The parameter was deprecated in favor of the enabled_provider_drivers
parameter[1].

[1] 2b9282bab65d879b47c4a1065801e0e9d916ecad

Change-Id: I83624cba33397fe569402b87d4a2085178d93d56"
openstack/puppet-octavia,manifests/controller.pp,"heartbeat_key parameter has no default

... because the parameter is required.

Change-Id: I9939ce7a047892d469d1d4d76a0316a4bdca11df"
openstack/puppet-octavia,manifests/params.pp,"task_flow: Ensure backend package is installed

The octavia pacakge in Ubuntu/Debian does not install python3-redis
automatically and it should be additionally installed. Also the octavia
package in RDO is removing explicit dependency to python3-redis[1] so
the package needs to be additionally installed in RDO in the future.

[1] https://review.rdoproject.org/r/c/openstack/octavia-distgit/+/53067

Change-Id: Ie7ffa7e22848a3f888a1a553aa26f2e4171a191b"
openstack/puppet-octavia,manifests/task_flow.pp,"task_flow: Ensure backend package is installed

The octavia pacakge in Ubuntu/Debian does not install python3-redis
automatically and it should be additionally installed. Also the octavia
package in RDO is removing explicit dependency to python3-redis[1] so
the package needs to be additionally installed in RDO in the future.

[1] https://review.rdoproject.org/r/c/openstack/octavia-distgit/+/53067

Change-Id: Ie7ffa7e22848a3f888a1a553aa26f2e4171a191b"
openstack/puppet-octavia,manifests/neutron.pp,"Merge ""Remove deprecated neutron parameters"""
openstack/puppet-octavia,manifests/neutron.pp,"Remove deprecated neutron parameters

... because these were deprecated during 2024.2 cycle and can be
replaced by the new parameters.

Change-Id: I332f209da86f11b721cb674c8281006642012cf7"
openstack/puppet-octavia,manifests/api.pp,"Merge ""Add max_request_body_size option support"""
openstack/puppet-watcher,manifests/init.pp,"Add support for [oslo_messaging_rabbit] enable_cancel_on_failover

Depends-on: https://review.opendev.org/928440
Change-Id: If56143db61f2642724365b40bdefc570cce4ef48"
openstack/puppet-watcher,manifests/init.pp,"Merge ""Expose parameter to customize [oslo_messaging_notifications] retry"""
openstack/puppet-watcher,manifests/init.pp,"Expose parameter to customize [oslo_messaging_notifications] retry

The parameter has been managed by puppet-oslo, but its value could not
be set via this module.

Change-Id: Ib84c596fdb77d1fdc2ec66a66a85b212cfeca65d"
openstack/puppet-watcher,manifests/init.pp,"Expose rabbit_transient_quorum_queue

Depends-on: https://review.opendev.org/911021
Change-Id: I3c512263368a4c2db5174190a007b1e17abe9153"
openstack/puppet-watcher,manifests/init.pp,"RabbitMQ: Add support for quorum queue options

Depends-on: https://review.opendev.org/894866
Change-Id: Ib8cb084611207a42beccacaf1f6980783acd10f0"
openstack/puppet-watcher,manifests/logging.pp,"Merge ""Drop hard-coded log_file"""
openstack/puppet-watcher,manifests/logging.pp,"Merge ""logging: Deprecate watch_log_file"""
openstack/puppet-watcher,manifests/logging.pp,"Drop hard-coded log_file

Because the service config file is shared among multiple services,
we should not set the option without any specific reason. In case
the option is not set (and no --log-file argument is passed) then
log file name is determined according to the process name, and each
service creates its own file.

Change-Id: I65b1abc96be4503d51d8b1af2c4ece7aa52be563"
openstack/puppet-watcher,manifests/logging.pp,"logging: Deprecate watch_log_file

This option was deprecated in oslo.log 6.0.0 [1]. Because the warning
to catch usage of the parameter is implemented in the underlying
oslo::log defined resource type, no additional warning message is
implemented in this module.

[1] https://review.opendev.org/914788

Depends-on: https://review.opendev.org/930126
Change-Id: Ia5fc2634a463e5b6c82f4f793a6a9246c6556098"
openstack/puppet-watcher,manifests/keystone/auth.pp,"Add validations for keystone resource parameters

The underlying implementation already have type validations. Inherit
these and make a few adjustment so that validation failures are raised
from the external interface layer instead of the internal interface.

Change-Id: Ibe86ec3f2b35771cf6c5d67f8fa788c292c8a737"
openstack/puppet-watcher,manifests/init.pp,"Merge ""Remove support for amqp1 messaging driver"""
openstack/puppet-watcher,manifests/init.pp,"Remove support for amqp1 messaging driver

The base implementation in puppet-oslo was deprecated during the 2023.2
cycle[1], so can be removed now.

[1] e174113210699b433dbae4c2c5a68bc3d269b5c3

Change-Id: Ifa9e691a23f6cf4340c1cd6a2105504c85d4ecc3"
openstack/puppet-watcher,manifests/init.pp,"Merge ""Remove deprecated watcher::use_ssl"""
openstack/puppet-watcher,manifests/init.pp,"Remove deprecated watcher::use_ssl

This parameter was deprecated during the previous cycle because it has
been unused[1].

[1] 513071c1cba170889df55cb3ca8bc60b80668fc2

Change-Id: I40210235134cad7a94819a29de80ca1c66742dc7"
openstack/puppet-watcher,manifests/cron/db_purge.pp,"validate maxdelay for cron job

The parameter descriptions says the value should be a positive integer
(or 0). Validate the given value to reject invalid values such as
strings or even negative values.

Change-Id: I00fda4e07f90f582699272bcdf2c576b6a2154dc"
openstack/puppet-watcher,manifests/cache.pp,"cache: Support new redis options

The oslo.cache 3.7.0 release introduced some options for redis backend
and redis sentinel backend. This introduces for these parameters.

Depneds-on: https://review.opendev.org/910629
Change-Id: Ia29f285622db27d9f4d29cfb8f335cc99216ca87"
openstack/puppet-watcher,manifests/db/create_schema.pp,"Merge ""Stop hard-coding config file for db sync"""
openstack/puppet-watcher,manifests/db/upgrade.pp,"Merge ""Stop hard-coding config file for db sync"""
openstack/puppet-watcher,manifests/cache.pp,"cache: Support options for SASL mechanism in memcached

Depends-on: https://review.opendev.org/910122
Change-Id: Id5f7ee9ec1cc00c4fe94d96030cac7330ae89384"
openstack/puppet-watcher,manifests/db/create_schema.pp,"Stop hard-coding config file for db sync

The watcher-db-manage command by default loads
/etc/watcher/watcher.conf. Removing the override allows us to use
additional paths such as watcher.conf.d in the future.

Change-Id: Ide53b1659e336f461bb5108621c31299cb211c3f"
openstack/puppet-watcher,manifests/db/upgrade.pp,"Stop hard-coding config file for db sync

The watcher-db-manage command by default loads
/etc/watcher/watcher.conf. Removing the override allows us to use
additional paths such as watcher.conf.d in the future.

Change-Id: Ide53b1659e336f461bb5108621c31299cb211c3f"
openstack/puppet-watcher,manifests/reports.pp,"Merge ""Add support for oslo.reports options"""
openstack/puppet-watcher,manifests/reports.pp,"Add support for oslo.reports options

Depends-on: https://review.opendev.org/804804
Change-Id: I438e50759f176f0a85772ceb2701493b3abf3550"
openstack/puppet-cloudkitty,manifests/init.pp,"Expose parameter to customize [oslo_messaging_notifications] retry

The parameter has been managed by puppet-oslo, but its value could not
be set via this module.

Change-Id: I19e98c7c722bfd6c00d7ed3e20290ed89c5d6ee9"
openstack/puppet-cloudkitty,manifests/init.pp,"Add support for [oslo_messaging_rabbit] enable_cancel_on_failover

Depends-on: https://review.opendev.org/928440
Change-Id: Ibb08e40882a3e5fb5ae4a6b8d43673b4251e2a1e"
openstack/puppet-cloudkitty,manifests/logging.pp,"Merge ""logging: Deprecate watch_log_file"""
openstack/puppet-cloudkitty,manifests/fetcher/gnocchi.pp,"Merge ""Format list value for [fetcher_gnocchi] resource_types"""
openstack/puppet-cloudkitty,manifests/logging.pp,"logging: Deprecate watch_log_file

This option was deprecated in oslo.log 6.0.0 [1]. Because the warning
to catch usage of the parameter is implemented in the underlying
oslo::log defined resource type, no additional warning message is
implemented in this module.

[1] https://review.opendev.org/914788

Depends-on: https://review.opendev.org/930126
Change-Id: Iaafbb48f78ecb413527151c30beda29bdf2fc581"
openstack/puppet-cloudkitty,manifests/fetcher/gnocchi.pp,"Format list value for [fetcher_gnocchi] resource_types

Change-Id: I40f08692b262a7df36ab624afea12994c7429bc3"
openstack/puppet-cloudkitty,manifests/keystone/auth.pp,"Add validations for keystone resource parameters

The underlying implementation already have type validations. Inherit
these and make a few adjustment so that validation failures are raised
from the external interface layer instead of the internal interface.

Change-Id: I1978f44f7d7f8e068b78137013c8ff69286cd9db"
openstack/puppet-cloudkitty,manifests/healthcheck.pp,"Add support for [healthcheck] enable_by_file_paths

Depends-on: https://review.opendev.org/923648
Change-Id: I835653457a288e537bf197475cc62d3fd9cdd629"
openstack/puppet-cloudkitty,manifests/init.pp,"Merge ""Remove support for amqp1 messaging driver"""
openstack/puppet-cloudkitty,manifests/init.pp,"Remove support for amqp1 messaging driver

The base implementation in puppet-oslo was deprecated during the 2023.2
cycle[1], so can be removed now.

[1] e174113210699b433dbae4c2c5a68bc3d269b5c3

Change-Id: Iaedf3ecffa2986e6f85f4f019b85c381bbabc543"
openstack/puppet-cloudkitty,manifests/storage.pp,"Merge ""Stop hard-coding config file for db sync"""
openstack/puppet-cloudkitty,manifests/storage.pp,"Stop hard-coding config file for db sync

The cloudkitty-storage-init command by default loads
/etc/cloudkitty/cloudkitty.conf. Removing the override allows us to use
additional paths such as cloudkitty.conf.d in the future.

Change-Id: I3109005c76a1ffd8f23b3aebd92861a0a4fb419a"
openstack/puppet-cloudkitty,manifests/healthcheck.pp,"healthcheck: Expose ignore_proxied_requests parameter

Depends-on: https://review.opendev.org/909807
Change-Id: I8c754cd823a501924567c68457be6e16b884ce85"
openstack/puppet-cloudkitty,manifests/healthcheck.pp,"healthcheck: Expose allowed_source_ranges

... which was added to puppet-oslo recently.

Depends-on: https://review.opendev.org/905557
Change-Id: Ia9b0534f4e4a6b0d2325ccef318f35ef3789eb08"
openstack/puppet-placement,manifests/logging.pp,"logging: Deprecate watch_log_file

This option was deprecated in oslo.log 6.0.0 [1]. Because the warning
to catch usage of the parameter is implemented in the underlying
oslo::log defined resource type, no additional warning message is
implemented in this module.

[1] https://review.opendev.org/914788

Depends-on: https://review.opendev.org/930126
Change-Id: I5697f9ce912fef7f3eb71514e2b8b307d338510e"
openstack/puppet-placement,manifests/keystone/auth.pp,"Add validations for keystone resource parameters

The underlying implementation already have type validations. Inherit
these and make a few adjustment so that validation failures are raised
from the external interface layer instead of the internal interface.

Change-Id: I9caa6e0247646c9a97c1d1a87a282503d2750241"
openstack/puppet-placement,manifests/db.pp,"db: Support connection_recycle_time option

Change-Id: I47e1c76909e108b1ddfa365a913ed66565012387"
openstack/puppet-placement,manifests/params.pp,"Use undef for package/service name

... instead of booleans, so that we can implement type enforcement
more easily.

Change-Id: I5d327a665e18cdaeaa9cdaea85a6fc92f320098d"
openstack/puppet-placement,manifests/api.pp,"Merge ""Refactor resource dependencies"""
openstack/puppet-placement,manifests/db.pp,"Merge ""Refactor resource dependencies"""
openstack/puppet-placement,manifests/deps.pp,"Merge ""Refactor resource dependencies"""
openstack/puppet-placement,manifests/keystone/authtoken.pp,"Merge ""Refactor resource dependencies"""
openstack/puppet-placement,manifests/policy.pp,"Merge ""Refactor resource dependencies"""
openstack/puppet-placement,manifests/api.pp,"Refactor resource dependencies

This refactors resource dependencies to improve the following points.

 - Avoid unnecessary dependencies across services. For example aodh
   service does not require cinder db.

 - Restart only api service when config files like paste.ini, which
   are used only be api service is changed.

This also removes the unused placement-support-package tag.

Change-Id: I31bac02c5895dc6f4090c1012db14bcdc1100aa3"
openstack/puppet-placement,manifests/db.pp,"Refactor resource dependencies

This refactors resource dependencies to improve the following points.

 - Avoid unnecessary dependencies across services. For example aodh
   service does not require cinder db.

 - Restart only api service when config files like paste.ini, which
   are used only be api service is changed.

This also removes the unused placement-support-package tag.

Change-Id: I31bac02c5895dc6f4090c1012db14bcdc1100aa3"
openstack/puppet-placement,manifests/deps.pp,"Refactor resource dependencies

This refactors resource dependencies to improve the following points.

 - Avoid unnecessary dependencies across services. For example aodh
   service does not require cinder db.

 - Restart only api service when config files like paste.ini, which
   are used only be api service is changed.

This also removes the unused placement-support-package tag.

Change-Id: I31bac02c5895dc6f4090c1012db14bcdc1100aa3"
openstack/puppet-placement,manifests/keystone/authtoken.pp,"Refactor resource dependencies

This refactors resource dependencies to improve the following points.

 - Avoid unnecessary dependencies across services. For example aodh
   service does not require cinder db.

 - Restart only api service when config files like paste.ini, which
   are used only be api service is changed.

This also removes the unused placement-support-package tag.

Change-Id: I31bac02c5895dc6f4090c1012db14bcdc1100aa3"
openstack/puppet-placement,manifests/policy.pp,"Refactor resource dependencies

This refactors resource dependencies to improve the following points.

 - Avoid unnecessary dependencies across services. For example aodh
   service does not require cinder db.

 - Restart only api service when config files like paste.ini, which
   are used only be api service is changed.

This also removes the unused placement-support-package tag.

Change-Id: I31bac02c5895dc6f4090c1012db14bcdc1100aa3"
openstack/puppet-placement,manifests/client.pp,"Merge ""Use new openstackclient tag"""
openstack/puppet-placement,manifests/client.pp,"Use new openstackclient tag

The new openstackclient tag was added so that we can get all resources
about openstack CLI more easily. This adds this tag to osc-placement
because the plugin provides some sub-commands.

This also removes the support package tag because the plguin is not
at all used by placement itself.

Depends-on: https://review.opendev.org/899594
Change-Id: I77f261c060e8c3fe982deb1f442f47df6bf01310"
openstack/puppet-placement,manifests/deps.pp,"Do not restart services after policy file changes

The oslo.policy library has implementations to detect change in policy
rules and reload the new rules without service restart.

Change-Id: I4787f344f7ee44e2c0f93bbf7da6de3c3ba83415"
openstack/puppet-placement,manifests/policy.pp,"Ensure purge_config takes a boolean value

The purge_config parameters only accept boolean values. This enforces
that using the typed parameters.

Change-Id: I637f94a04511256c0d69284522d7ba73a0332c5d"
openstack/puppet-placement,manifests/keystone/authtoken.pp,"authtoken: Make password required

The password parameter is not really optional. This makes it
a required parameter to give more sensible validation error.

Change-Id: Ib95a8e4ec5d5f3b2b3ad9a32cb2e93873b529b62"
openstack/puppet-placement,manifests/deps.pp,"Add per module policy service refresh

Updating the policies for this project should only
refresh the services that reads it.

Change-Id: Iaf0bae66224d568a2a05f4ac5281c36bde2705e0"
openstack/puppet-placement,manifests/policy.pp,"Add per module policy service refresh

Updating the policies for this project should only
refresh the services that reads it.

Change-Id: Iaf0bae66224d568a2a05f4ac5281c36bde2705e0"
